# vim: ft=rst

This directory contains test scripts that are useful for running a
bunch of tests all at once. 

Available testsuites
====================
The available testsuites are obtained from a script, usually 
selftest/samba{3,4}_tests.sh. This script should for each testsuite output 
the name of the test, the command to run and the environment that should be 
provided. Use the included "plantest" function to generate the required output.

Testsuite behaviour
================================

Exit code
------------
The testsuites should exit with a non-zero exit code if at least one 
test failed. 

Output format
-------------

test: <NAME>
success: <NAME> 
failure: <NAME> 
error: <NAME>
skip: <NAME>

failure: <NAME> [ EXTENDED DESCRIPTION ]

Environments
============
Tests often need to run against a server with particular things set up, 
a "environment". This environment is provided by the test "target": Samba 3, 
Samba 4 or Windows.

The following environments are currently available:

 - none: No server set up, no variables set.
 - dc: Domain controller set up. The following environment variables will 
   be set:
     * USERNAME: Administrator user name
	 * PASSWORD: Administrator password
	 * DOMAIN: Domain name
	 * REALM: Realm name
	 * SERVER: DC host name 
	 * SERVER_IP: DC IPv4 address
	 * NETBIOSNAME: DC NetBIOS name
	 * NETIOSALIAS: DC NetBIOS alias

 - member: Domain controller and member server that is joined to it set up. The
   following environment variables will be set:
     * USERNAME: Domain administrator user name
	 * PASSWORD: Domain administrator password
	 * DOMAIN: Domain name
	 * REALM: Realm name
	 * SERVER: Name of the member server


Running tests
=============

To run all the tests use::

   make test

To run a quick subset (aiming for about 1 minute of testing) run::

   make quicktest

To run a specific test, use this syntax::

   make test TESTS=testname

for example::

   make test TESTS=samba4.BASE-DELETE

