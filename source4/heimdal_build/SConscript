Import('buildenv hostenv')

hostenv.StaticLibrary('heimdal_kdc',
	['../kdc/default_config.c','../kdc/kerberos5.c','../kdc/pkinit.c',
	 '../kdc/log.c','../kdc/misc.c','../kdc/524.c','../kdc/kerberos4.c',
	 '../kdc/kaserver.c','../kdc/process.c'])

hdb_asn1 = hostenv.ASN1('../heimdal/lib/hdb/hdb.asn1')
gssapi_asn1 = hostenv.ASN1('../heimdal/lib/gssapi/spnego.asn1')
k5_asn1 = hostenv.ASN1('../heimdal/lib/asn1/k5.asn1')

hostenv.StaticLibrary('heimdal_hdb',
	['../heimdal/lib/hdb/db.c','../heimdal/lib/hdb/hdb.c','../heimdal/lib/hdb/ext.c','../heimdal/lib/hdb/keys.c',
	'../heimdal/lib/hdb/mkey.c','../heimdal/lib/hdb/ndbm.c',hdb_asn1,
	hostenv.ErrorTable('../heimdal/lib/hdb/hdb_err.et')])

hostenv.StaticLibrary('heimdal_gssapi',
	['../heimdal/lib/gssapi/init_sec_context.c','../heimdal/lib/gssapi/inquire_cred.c',
	'../heimdal/lib/gssapi/release_buffer.c','../heimdal/lib/gssapi/release_cred.c',
	'../heimdal/lib/gssapi/release_name.c','../heimdal/lib/gssapi/release_oid_set.c',
	'../heimdal/lib/gssapi/sequence.c','../heimdal/lib/gssapi/test_oid_set_member.c',
	'../heimdal/lib/gssapi/unwrap.c','../heimdal/lib/gssapi/verify_mic.c','../heimdal/lib/gssapi/wrap.c',
	'../heimdal/lib/gssapi/address_to_krb5addr.c',
	gssapi_asn1,'../heimdal/lib/gssapi/8003.c',
	'../heimdal/lib/gssapi/accept_sec_context.c','../heimdal/lib/gssapi/acquire_cred.c',
	'../heimdal/lib/gssapi/add_oid_set_member.c','../heimdal/lib/gssapi/arcfour.c',
	'../heimdal/lib/gssapi/ccache_name.c','../heimdal/lib/gssapi/copy_ccache.c','../heimdal/lib/gssapi/cfx.c',
	'../heimdal/lib/gssapi/compat.c','../heimdal/lib/gssapi/context_time.c',
	'../heimdal/lib/gssapi/create_emtpy_oid_set.c','../heimdal/lib/gssapi/decapsulate.c',
	'../heimdal/lib/gssapi/delete_sec_context.c','../heimdal/lib/gssapi/display_name.c',
	'../heimdal/lib/gssapi/display_status.c','../heimdal/lib/gssapi/duplicate_name.c',
	'../heimdal/lib/gssapi/encapsulate.c','../heimdal/lib/gssapi/external.c',
	'../heimdal/lib/gssapi/get_mic.c','../heimdal/lib/gssapi/import_name.c','../heimdal/lib/gssapi/init.c'])

hostenv.StaticLibrary('heimdal_krb5',
	['../heimdal/lib/krb5/acache.c','../heimdal/lib/krb5/add_et_list.c','../heimdal/lib/krb5/addr_families.c',
	'../heimdal/lib/krb5/appdefault.c','../heimdal/lib/krb5/asn1_glue.c','../heimdal/lib/krb5/auth_context.c',
	'../heimdal/lib/krb5/build_ap_req.c','../heimdal/lib/krb5/build_auth.c','../heimdal/lib/krb5/cache.c',
	'../heimdal/lib/krb5/changepw.c','../heimdal/lib/krb5/codec.c','../heimdal/lib/krb5/config_file.c',
	'../heimdal/lib/krb5/config_file_netinfo.c','../heimdal/lib/krb5/constants.c',
	'../heimdal/lib/krb5/context.c','../heimdal/lib/krb5/copy_host_realm.c','../heimdal/lib/krb5/crc.c',
	'../heimdal/lib/krb5/creds.c','../heimdal/lib/krb5/crypto.c','../heimdal/lib/krb5/data.c',
	'../heimdal/lib/krb5/eai_to_heim_errno.c','../heimdal/lib/krb5/error_string.c',
	'../heimdal/lib/krb5/expand_hostname.c','../heimdal/lib/krb5/fcache.c',
	'../heimdal/lib/krb5/free.c','../heimdal/lib/krb5/free_host_realm.c',
	'../heimdal/lib/krb5/generate_seq_number.c','../heimdal/lib/krb5/generate_subkey.c',
	'../heimdal/lib/krb5/get_cred.c','../heimdal/lib/krb5/get_default_principal.c',
	'../heimdal/lib/krb5/get_default_realm.c','../heimdal/lib/krb5/get_for_creds.c',
	'../heimdal/lib/krb5/get_host_realm.c','../heimdal/lib/krb5/get_in_tkt.c',
	'../heimdal/lib/krb5/get_in_tkt_with_keytab.c','../heimdal/lib/krb5/get_port.c',
	'../heimdal/lib/krb5/init_creds.c','../heimdal/lib/krb5/init_creds_pw.c','../heimdal/lib/krb5/kcm.c',
	'../heimdal/lib/krb5/keyblock.c','../heimdal/lib/krb5/keytab.c','../heimdal/lib/krb5/keytab_any.c',
	'../heimdal/lib/krb5/keytab_file.c','../heimdal/lib/krb5/keytab_memory.c',
	'../heimdal/lib/krb5/keytab_keyfile.c','../heimdal/lib/krb5/keytab_krb4.c','../heimdal/lib/krb5/krbhst.c',
	'../heimdal/lib/krb5/log.c','../heimdal/lib/krb5/mcache.c','../heimdal/lib/krb5/misc.c',
	'../heimdal/lib/krb5/mk_error.c','../heimdal/lib/krb5/mk_priv.c','../heimdal/lib/krb5/mk_rep.c',
	'../heimdal/lib/krb5/mk_req.c','../heimdal/lib/krb5/mk_req_ext.c','../heimdal/lib/krb5/mit_glue.c',
	'../heimdal/lib/krb5/n-fold.c','../heimdal/lib/krb5/padata.c','../heimdal/lib/krb5/pkinit.c',
	'../heimdal/lib/krb5/principal.c','../heimdal/lib/krb5/rd_cred.c','../heimdal/lib/krb5/rd_error.c',
	'../heimdal/lib/krb5/rd_priv.c','../heimdal/lib/krb5/rd_rep.c','../heimdal/lib/krb5/rd_req.c',
	'../heimdal/lib/krb5/replay.c','../heimdal/lib/krb5/send_to_kdc.c',
	'../heimdal/lib/krb5/set_default_realm.c','../heimdal/lib/krb5/store.c','../heimdal/lib/krb5/store_emem.c',
	'../heimdal/lib/krb5/store_fd.c','../heimdal/lib/krb5/store_mem.c','../heimdal/lib/krb5/ticket.c',
	'../heimdal/lib/krb5/time.c','../heimdal/lib/krb5/transited.c','../heimdal/lib/krb5/v4_glue.c',
	'../heimdal/lib/krb5/version.c','../heimdal/lib/krb5/warn.c',
	hostenv.ErrorTable('../heimdal/lib/krb5/krb5_err.et'),
	hostenv.ErrorTable('../heimdal/lib/krb5/heim_err.et'),
	hostenv.ErrorTable('../heimdal/lib/krb5/k524_err.et')])

hostenv.StaticLibrary('heimdal_asn1', k5_asn1)

hostenv.StaticLibrary('heimdal_des',
	['../heimdal/lib/des/aes.c','../heimdal/lib/des/des.c','../heimdal/lib/des/md4.c','../heimdal/lib/des/md5.c',
	'../heimdal/lib/des/rc2.c','../heimdal/lib/des/rc4.c','../heimdal/lib/des/rijndael-alg-fst.c',
	'../heimdal/lib/des/rnd_keys.c','../heimdal/lib/des/sha.c','../heimdal/lib/des/ui.c'])

hostenv.StaticLibrary('roken_gai_strerror', ['../heimdal/lib/roken/gai_strerror.c'])
hostenv.StaticLibrary('roken_inet_aton', ['../heimdal/lib/roken/inet_aton.c'])
hostenv.StaticLibrary('roken_addrinfo', 
	['../heimdal/lib/roken/getaddrinfo.c','../heimdal/lib/roken/freeaddrinfo.c',
	 '../heimdal/lib/roken/getipnodebyaddr.c','../heimdal/lib/roken/getipnodebyname.c',
	 '../heimdal/lib/roken/freehostent.c', '../heimdal/lib/roken/copyhostent.c',
	 '../heimdal/lib/roken/hostent_find_fqdn.c'])

hostenv.StaticLibrary('roken',
	['../heimdal/lib/roken/base64.c','../heimdal/lib/roken/bswap.c','../heimdal/lib/roken/get_window_size.c',
	'../heimdal/lib/roken/getprogname.c','../heimdal/lib/roken/h_errno.c','../heimdal/lib/roken/issuid.c',
	'../heimdal/lib/roken/net_read.c','../heimdal/lib/roken/net_write.c','../heimdal/lib/roken/parse_time.c',
	'../heimdal/lib/roken/parse_units.c','../heimdal/lib/roken/resolve.c',
	'../heimdal/lib/roken/roken_gethostby.c','../heimdal/lib/roken/signal.c','../heimdal/lib/roken/vis.c',
	'../heimdal/lib/roken/strlwr.c','../heimdal/lib/roken/strsep_copy.c','../heimdal/lib/roken/strupr.c',
	'../heimdal/lib/roken/strpool.c','heimdal_build/replace.c'])

hostenv.StaticLibrary('heimdal_vers',['../heimdal/lib/version/print_version.c'])
hostenv.StaticLibrary('heimdal_glue',['heimdal_build/glue.c'])
hostenv.StaticLibrary('heimdal_com_err',
	['../heimdal/lib/com_err/com_err.c','../heimdal/lib/com_err/error.c'])

buildenv.Program('asn1_compile',
	['../heimdal/lib/asn1/main.c','../heimdal/lib/asn1/gen.c',
	'../heimdal/lib/asn1/gen_copy.c','../heimdal/lib/asn1/gen_decode.c',
	'../heimdal/lib/asn1/gen_encode.c','../heimdal/lib/asn1/gen_free.c',
	'../heimdal/lib/asn1/gen_glue.c','../heimdal/lib/asn1/gen_length.c',
	'../heimdal/lib/asn1/hash.c','../heimdal/lib/asn1/lex.l',
	'../heimdal/lib/asn1/parse.y','../heimdal/lib/roken/emalloc.c',
	'../heimdal/lib/roken/getarg.c','../heimdal/lib/roken/setprogname.c',
	'../heimdal/lib/roken/strupr.c','../heimdal/lib/roken/getprogname.c',
	'../heimdal/lib/roken/get_window_size.c','../heimdal/lib/roken/estrdup.c',
	'../heimdal/lib/roken/ecalloc.c','../heimdal/lib/asn1/symbol.c',
	'heimdal_build/replace.c','../heimdal/lib/vers/print_version.c',
	'lib/replace/snprintf.c','lib/replace/replace.c'])

buildenv.Program('compile_et',
	['../heimdal/lib/vers/print_version.c','../heimdal/lib/com_err/lex.l','../heimdal/lib/com_err/parse.y',
	'../heimdal/lib/com_err/compile_et.c','../heimdal/lib/roken/getarg.c',
	'../heimdal/lib/roken/get_window_size.c','../heimdal/lib/roken/getprogname.c',
	'../heimdal/lib/roken/strupr.c','../heimdal/lib/roken/setprogname.c','heimdal_build/replace.c',
	'lib/replace/snprintf.c','lib/replace/replace.c'])
