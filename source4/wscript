#! /usr/bin/env python

srcdir = '..'
blddir = 'bin'

import sys
sys.path.insert(0, srcdir+"/buildtools/wafsamba")
import wafsamba

LIBREPLACE_DIR= srcdir + '/lib/replace'
LIBLDB_DIR=     srcdir + '/source4/lib/ldb'

def set_options(opt):
    opt.recurse(LIBREPLACE_DIR)
    opt.recurse(LIBLDB_DIR)
    opt.recurse('selftest')


def configure(conf):
    conf.DEFINE('_SAMBA_BUILD_', 4)
    conf.find_program('python', var='PYTHON', mandatory=True)
    conf.sub_config(LIBREPLACE_DIR)
    conf.sub_config(LIBLDB_DIR)
    conf.sub_config('heimdal_build')

    conf.DEFINE('CONFIG_H_IS_FROM_SAMBA', 1)
    conf.ADD_CFLAGS('-I.. -I../lib -I../../lib  -I../.. -I../include -Idefault/source4')
    conf.ADD_CFLAGS('-I../../lib/socket_wrapper -I../../lib/talloc -I../../lib/replace -I../../lib/tevent')

    conf.ADD_CFLAGS('-I../heimdal_build -I../heimdal/lib/krb5 -I../heimdal/lib/asn1 -I../heimdal/lib/com_err -I -I../heimdal/lib/hx509 -I../heimdal/lib/roken -I../heimdal/lib/hx509 -I../heimdal/lib/asn1 -I../heimdal/lib/hcrypto -I../heimdal/lib -I../heimdal/lib/hcrypto/imath -I../heimdal/lib/wind')

    conf.SAMBA_CONFIG_H('include/config.h')
