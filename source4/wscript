#! /usr/bin/env python

srcdir = '..'
blddir = 'bin'

import sys
sys.path.insert(0, srcdir+"/buildtools/wafsamba")
import wafsamba

LIBREPLACE_DIR= srcdir + '/lib/replace'
LIBLDB_DIR=     srcdir + '/source4/lib/ldb'

def set_options(opt):
    opt.recurse(LIBREPLACE_DIR)
    opt.recurse(LIBLDB_DIR)
    opt.recurse('selftest')
    opt.recurse('lib/tls')


def configure(conf):
    conf.DEFINE('_SAMBA_BUILD_', 4)
    conf.find_program('python', var='PYTHON', mandatory=True)
    conf.find_program('perl', var='PERL', mandatory=True)
    conf.sub_config(LIBREPLACE_DIR)
    conf.sub_config(LIBLDB_DIR)
    conf.sub_config('heimdal_build')
    conf.sub_config('lib/tls')
    conf.sub_config('ntvfs/sysdep')
    conf.sub_config('../lib/util')
    conf.sub_config('../lib/zlib')
    conf.sub_config('../lib/util/charset')
    conf.sub_config('auth')

    conf.DEFINE('CONFIG_H_IS_FROM_SAMBA', 1)
    conf.ADD_EXTRA_INCLUDES('#source4 #lib #source4/lib  #source4/include #lib/socket_wrapper #lib/talloc #lib/replace #lib/event')

    conf.SAMBA_CONFIG_H('include/config.h')
