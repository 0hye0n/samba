Index: Makefile.in
===================================================================
RCS file: /data/cvs/samba/source/Makefile.in,v
retrieving revision 1.475
diff -u -r1.475 Makefile.in
--- Makefile.in	2002/05/09 04:44:00	1.475
+++ Makefile.in	2002/05/13 07:26:04
@@ -792,6 +792,45 @@
 	-$(INSTALLCMD) -d ${prefix}/include
 	-$(INSTALLCMD) include/libsmbclient.h ${prefix}/include
 
+# Python extensions
+
+PYTHON_OBJS = $(LIB_OBJ) $(LIBSMB_OBJ) $(RPC_PARSE_OBJ) $(UBIQX_OBJ) \
+	$(PARAM_OBJ) $(LIBMSRPC_OBJ) $(PASSDB_OBJ) $(GROUPDB_OBJ)
+
+PY_SPOOLSS_PROTO_OBJ = python/py_spoolss.o \
+		python/py_spoolss_printers.o python/py_spoolss_printers_conv.o\
+		python/py_spoolss_forms.o python/py_spoolss_forms_conv.o \
+		python/py_spoolss_ports.o python/py_spoolss_ports_conv.o \
+		python/py_spoolss_drivers.o python/py_spoolss_drivers_conv.o \
+		python/py_spoolss_jobs.o python/py_spoolss_jobs_conv.o \
+		python/py_spoolss_printerdata.o
+
+PY_LSA_PROTO_OBJ = python/py_lsa.o
+
+PY_COMMON_PROTO_OBJ = python/py_common.c python/py_ntsec.c
+
+python_proto: python_spoolss_proto python_lsa_proto python_common_proto
+
+python_spoolss_proto:
+	@cd $(srcdir) && $(SHELL) script/mkproto.sh $(AWK) \
+		-h _PY_SPOOLSS_PROTO_H python/py_spoolss_proto.h \
+		$(PY_SPOOLSS_PROTO_OBJ)
+
+python_lsa_proto:
+	@cd $(srcdir) && $(SHELL) script/mkproto.sh $(AWK) \
+		-h _PY_LSA_PROTO_H python/py_lsa_proto.h \
+		$(PY_LSA_PROTO_OBJ)
+
+python_common_proto:
+	@cd $(srcdir) && $(SHELL) script/mkproto.sh $(AWK) \
+		-h _PY_COMMON_PROTO_H python/py_common_proto.h \
+		$(PY_COMMON_PROTO_OBJ)
+
+python_ext: $(PYTHON_OBJS)
+	@echo python python/setup.py build
+	@PYTHON_OBJS="$(PYTHON_OBJS)" PYTHON_CFLAGS="$(CFLAGS) $(CPPFLAGS)" \
+		python python/setup.py build
+
 # revert to the previously installed version
 revert:
 	@$(SHELL) $(srcdir)/script/revert.sh $(SBINDIR) $(SPROGS) 
Index: configure.in
===================================================================
RCS file: /data/cvs/samba/source/configure.in,v
retrieving revision 1.307
diff -u -r1.307 configure.in
--- configure.in	2002/05/11 00:36:33	1.307
+++ configure.in	2002/05/13 07:26:06
@@ -2892,7 +2892,7 @@
 builddir=`pwd`
 AC_SUBST(builddir)
 
-AC_OUTPUT(include/stamp-h Makefile script/findsmb)
+AC_OUTPUT(include/stamp-h Makefile script/findsmb python/setup.py)
 
 #################################################
 # Print very concise instructions on building/use
