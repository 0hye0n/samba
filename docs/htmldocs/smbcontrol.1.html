<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML
><HEAD
><TITLE
>smbcontrol</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.7"></HEAD
><BODY
CLASS="REFENTRY"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><H1
><A
NAME="SMBCONTROL.1"
></A
>smbcontrol</H1
><DIV
CLASS="REFNAMEDIV"
><A
NAME="AEN5"
></A
><H2
>Name</H2
>smbcontrol&nbsp;--&nbsp;send messages to smbd, nmbd or winbindd processes</DIV
><DIV
CLASS="REFSYNOPSISDIV"
><A
NAME="AEN8"
></A
><H2
>Synopsis</H2
><P
><B
CLASS="COMMAND"
>smbcontrol</B
>  [-i]</P
><P
><B
CLASS="COMMAND"
>smbcontrol</B
>  [destination] [message-type] [parameter]</P
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="AEN17"
></A
><H2
>DESCRIPTION</H2
><P
>This tool is part of the <SPAN
CLASS="CITEREFENTRY"
><SPAN
CLASS="REFENTRYTITLE"
>Samba</SPAN
>(7)</SPAN
> suite.</P
><P
><B
CLASS="COMMAND"
>smbcontrol</B
> is a very small program, which 
	sends messages to a <SPAN
CLASS="CITEREFENTRY"
><SPAN
CLASS="REFENTRYTITLE"
>smbd</SPAN
>(8)</SPAN
>, a <SPAN
CLASS="CITEREFENTRY"
><SPAN
CLASS="REFENTRYTITLE"
>nmbd</SPAN
>(8)</SPAN
>, or a <SPAN
CLASS="CITEREFENTRY"
><SPAN
CLASS="REFENTRYTITLE"
>winbindd</SPAN
>(8)</SPAN
> daemon running on the system.</P
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="AEN34"
></A
><H2
>OPTIONS</H2
><P
></P
><DIV
CLASS="VARIABLELIST"
><DL
><DT
>-i</DT
><DD
><P
>Run interactively. Individual commands 
		of the form destination message-type parameters can be entered 
		on STDIN. An empty command line or a "q" will quit the 
		program.</P
></DD
><DT
>destination</DT
><DD
><P
>One of <VAR
CLASS="PARAMETER"
>nmbd</VAR
>, <VAR
CLASS="PARAMETER"
>smbd</VAR
> or a process ID.</P
><P
>The <VAR
CLASS="PARAMETER"
>smbd</VAR
> destination causes the 
		message to "broadcast" to all smbd daemons.</P
><P
>The <VAR
CLASS="PARAMETER"
>nmbd</VAR
> destination causes the 
		message to be sent to the nmbd daemon specified in the 
		<TT
CLASS="FILENAME"
>nmbd.pid</TT
> file.</P
><P
>If a single process ID is given, the message is sent 
		to only that process.</P
></DD
><DT
>message-type</DT
><DD
><P
>One of: <CODE
CLASS="CONSTANT"
>close-share</CODE
>,
		<CODE
CLASS="CONSTANT"
>debug</CODE
>, 
		<CODE
CLASS="CONSTANT"
>force-election</CODE
>, <CODE
CLASS="CONSTANT"
>ping
		</CODE
>, <CODE
CLASS="CONSTANT"
>profile</CODE
>, <CODE
CLASS="CONSTANT"
>		debuglevel</CODE
>, <CODE
CLASS="CONSTANT"
>profilelevel</CODE
>, 
		or <CODE
CLASS="CONSTANT"
>printnotify</CODE
>.</P
><P
>The <CODE
CLASS="CONSTANT"
>close-share</CODE
> message-type sends a 
		message to smbd which will then close the client connections to
		the named share. Note that this doesn't affect client connections
		to any other shares. This message-type takes an argument of the
		share name for which client connections will be closed, or the
		"*" character which will close all currently open shares.
		This may be useful if you made changes to the access controls on the share.
		This message can only be sent to <CODE
CLASS="CONSTANT"
>smbd</CODE
>.</P
><P
>The <CODE
CLASS="CONSTANT"
>debug</CODE
> message-type allows 
		the debug level to be set to the value specified by the 
		parameter. This can be sent to any of the destinations.</P
><P
>The <CODE
CLASS="CONSTANT"
>force-election</CODE
> message-type can only be 
		sent to the <CODE
CLASS="CONSTANT"
>nmbd</CODE
> destination. This message 
		causes the <B
CLASS="COMMAND"
>nmbd</B
> daemon to force a new browse
		master election.</P
><P
>The <CODE
CLASS="CONSTANT"
>ping</CODE
> message-type sends the 
		number of "ping" messages specified by the parameter and waits 
		for the same number of  reply "pong" messages. This can be sent to 
		any of the destinations.</P
><P
>The <CODE
CLASS="CONSTANT"
>profile</CODE
> message-type sends a 
		message to an smbd to change the profile settings based on the 
		parameter. The parameter can be "on" to turn on profile stats 
		collection, "off" to turn off profile stats collection, "count"
		to enable only collection of count stats (time stats are 
		disabled), and "flush" to zero the current profile stats. This can 
		be sent to any smbd or nmbd destinations.</P
><P
>The <CODE
CLASS="CONSTANT"
>debuglevel</CODE
> message-type sends 
		a "request debug level" message. The current debug level setting 
		is returned by a  "debuglevel" message. This can be 
		sent to any of the destinations.</P
><P
>The <CODE
CLASS="CONSTANT"
>profilelevel</CODE
> message-type sends 
		a "request profile level" message.  The current profile level 
		setting is returned by a  "profilelevel" message. This can be sent 
		to any smbd or nmbd destinations.</P
><P
>The <CODE
CLASS="CONSTANT"
>printnotify</CODE
> message-type sends a 
		message to smbd which in turn sends a printer notify message to 
		any Windows NT clients connected to a printer. This message-type
		takes the following arguments:

		<P
></P
><DIV
CLASS="VARIABLELIST"
><DL
><DT
>queuepause printername</DT
><DD
><P
>Send a queue pause change notify
		    message to the printer specified.</P
></DD
><DT
>queueresume printername</DT
><DD
><P
>Send a queue resume change notify
		    message for the printer specified.</P
></DD
><DT
>jobpause printername unixjobid</DT
><DD
><P
>Send a job pause change notify
		    message for the printer and unix jobid
		    specified.</P
></DD
><DT
>jobresume printername unixjobid</DT
><DD
><P
>Send a job resume change notify
		    message for the printer and unix jobid
		    specified.</P
></DD
><DT
>jobdelete printername unixjobid</DT
><DD
><P
>Send a job delete change notify
		    message for the printer and unix jobid
		    specified.</P
></DD
></DL
></DIV
>

		Note that this message only sends notification that an
		event has occured.  It doesn't actually cause the
		event to happen.

		This message can only be sent to <CODE
CLASS="CONSTANT"
>smbd</CODE
>. 
		</P
></DD
><DT
>parameters</DT
><DD
><P
>any parameters required for the message-type</P
></DD
></DL
></DIV
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="AEN110"
></A
><H2
>VERSION</H2
><P
>This man page is correct for version 2.2 of 
	the Samba suite.</P
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="AEN113"
></A
><H2
>SEE ALSO</H2
><P
><SPAN
CLASS="CITEREFENTRY"
><SPAN
CLASS="REFENTRYTITLE"
>nmbd</SPAN
>(8)</SPAN
> and <SPAN
CLASS="CITEREFENTRY"
><SPAN
CLASS="REFENTRYTITLE"
>smbd</SPAN
>(8)</SPAN
>.</P
></DIV
><DIV
CLASS="REFSECT1"
><A
NAME="AEN122"
></A
><H2
>AUTHOR</H2
><P
>The original Samba software and related utilities 
	were created by Andrew Tridgell. Samba is now developed
	by the Samba Team as an Open Source project similar 
	to the way the Linux kernel is developed.</P
><P
>The original Samba man pages were written by Karl Auer. 
	The man page sources were converted to YODL format (another 
	excellent piece of Open Source software, available at <A
HREF="ftp://ftp.icce.rug.nl/pub/unix/"
TARGET="_top"
>	ftp://ftp.icce.rug.nl/pub/unix/</A
>) and updated for the Samba 2.0 
	release by Jeremy Allison.  The conversion to DocBook for 
	Samba 2.2 was done by Gerald Carter. The conversion to DocBook XML 4.2 for
	Samba 3.0 was done by Alexander Bokovoy.</P
></DIV
></BODY
></HTML
>