<!--

	I am looking for help to finish SGML.

-->
<!-- manual page source format generated by PolyglotMan v3.0.9
     available via anonymous ftp from ftp.cs.berkeley.edu:/ucb/people/phelps/tcltk/rman.tar.Z -->

<RefEntry ID="RPCCLIENT"."8">
<RefMeta><RefEntryTitle>"RPCCLIENT"</RefEntryTitle><ManVolNum>"8"</ManVolNum></RefMeta>

<RefNameDiv><Title>Name</Title>rpcclient </RefEntry><RefPurpose> developer's tool to testing client side MS-RPC functions </RefSect1>

<RefSynopsisDiv><Title>Synopsis</Title><ItemizedList MARK=Bullet>
<Term><B>rpcclient</B></Term><ListItem><Para>[-d
debuglevel] [-S server] [-l logbasename] [-n netbios name] [-N] [-m maxprotocol]
[-I destIP] [-E] [-U username] [-W workgroup] [-c `command string`] [-t terminalcode]
[-i scope] [-O socket options] [-s smb.conf] </Para></ListItem>
</ItemizedList>
</RefSect1>

<RefSect1><Title>Description</Title><ItemizedList MARK=Bullet>
<Term><B>rpcclient</B></Term><ListItem><Para>is a utility
for developers for executing various MS-RPC functions.  It's primary use is
for testing Samba's own MS-RPC server implementation, however many administrators
have written scripts around it to manage Windows NT clients from their
UNIX workstation. </Para></ListItem>
</ItemizedList>
</RefSect1>

<RefSect1><Title>Options</Title>

<Para><ItemizedList MARK=Bullet>
<Term><B>-d debuglevel</B></Term><ListItem><Para>set the debuglevel. Debug level 0 is
the lowest and 100 being the highest. This should be set to 100 if you are
planning on  submitting a bug report to the Samba team (see BUGS.txt). </Para></ListItem>
<Term><B>-S
server</B></Term><ListItem><Para>NetBIOS name of Server to which you wish to connect. The server can
be  any SMB/CIFS server. The name is resolved using either the "name resolve
 order = " line or by using the <B>-R</B> option. </Para></ListItem>
<Term><B>-l logbasename</B></Term><ListItem><Para>File name for log/debug
files. .client will be appended. The log file is never removed  by the client.
</Para></ListItem>
<Term><B>-n netbios name</B></Term><ListItem><Para>NetBIOS name of the local machine. This option is only needed
if your Samba client cannot find it automatically. Samba should use the
uppercase of the machine's hostname. </Para></ListItem>
<Term><B>-N</B></Term><ListItem><Para>tells rpcclient not to ask for a password.
rpcclient will prompt the user by default. </Para></ListItem>
<Term><B>-I destIP</B></Term><ListItem><Para>The IP address of the
server specified with the <B>-S</B> option. Only needed when the server's NetBIOS
name cannot be resolved using WINS or broadcast and isn't found in the LMHOSTS
file. </Para></ListItem>
<Term><B>-E</B></Term><ListItem><Para>causes regedit to write messages to stderr instead of stdout. </Para></ListItem>
<Term><B>-U username[%pass]</B></Term><ListItem><Para>Sets
the SMB username or username and password. If %pass is not specified, The
user will be prompted. The client will first check the USER environment
variable, then the LOGNAME variable and if either exist, the string is
uppercased. Anything in these variables following a % sign will be treated
as the password. If these environmental variables are not found, the username
GUEST is used. </Para></ListItem>
<Term>If the password is not included in these environment variables
</Term><ListItem><Para>(using the %pass syntax), rpcclient will look for a PASSWD environment
variable from which to read the password. </Para></ListItem>
<Term>A third option is to use a credentials
file which contains </Term><ListItem><Para>the plaintext of the username and password.  This option
is mainly provided for scripts where the admin doesn't desire to pass the
credentials on the command line or via environment variables. If this method
is used, make certain that the permissions on the file restrict access
from unwanted users.  See the <B>-A</B> for more details. </Para></ListItem>
<Term>Be cautious about including
passwords in scripts or in the </Term><ListItem><Para>CWPASSWD environment variable. Also, on many
systems the command line of a running process may be seen via the CWps
command to be safe always allow smbclient to prompt for a password and
type it in directly. </Para></ListItem>
<Term><B>-A &lt;filename&gt;</B></Term><ListItem><Para>This option allows you to specify a file
from which to read the username and password used in the connection.  The
format of the file is </Para></ListItem>
<Term>CWusername = &lt;value&gt;  </Term><ListItem><Para><BR>
CWpassword = &lt;value&gt;  <BR>
</Para></ListItem>
<Term>Make certain that the permissions on the file restrict access from </Term><ListItem><Para>unwanted
users. </Para></ListItem>
<Term><B>-W domain</B></Term><ListItem><Para>Set the SMB domain of the username.   This overrides the default
 domain which is the domain of the server specified with the  bt(-S) option.
If the domain specified is the same as the server's NetBIOS name, it causes
the client to log on using the  server's local SAM (as opposed to the Domain
SAM). </Para></ListItem>
<Term><B>-P</B></Term><ListItem><Para>operate in promptless mode.  Without this mode (the default) rpcclient
displays a prompt of the form '[domain\username@host]$' </Para></ListItem>
<Term><B>-c 'command string'</B></Term><ListItem><Para>execute
semicolon separated commands (listed below)) </Para></ListItem>
<Term><B>-t terminalcode</B></Term><ListItem><Para>This tells the
Samba client how to interpret the incoming filenames, in regards to character
sets. The list here is not complete. For a complete list see your local Samba
source. Some valid options are sjis, euc, jis7, jis8, junet and hex. </Para></ListItem>
<Term><B>-O socket
options</B></Term><ListItem><Para>These socket options are the same as in smb.conf (under the bt(socket
options = ) section). </Para></ListItem>
<Term><B>-s smb.conf</B></Term><ListItem><Para>Specifies the location of the all important
smb.conf file. </Para></ListItem>
<Term><B>-i scope</B></Term><ListItem><Para>Defines the NetBIOS scope. For more information on NetBIOS
scopes, see rfc1001 and rfc1002. NetBIOS scopes are rarely used. </Para></ListItem>
</ItemizedList>


<Para></RefSect1>

<RefSect1><Title>Commands</Title>

<Para><ItemizedList MARK=Bullet>
<Term><B>SPOOLSS
Commands</B></Term><ListItem><Para></Para></ListItem>
<Term>spoolenum</Term><ListItem><Para>Execute an EnumPrinters call.  This lists the various installed
and share printers.  Refer to the MS Platform SDK documentation for more
details of the various  flags and calling options. </Para></ListItem>
</ItemizedList>


<Para><ItemizedList MARK=Bullet>
<Term>spoolenumports &lt;level&gt;</Term><ListItem><Para>Executes
an EnumPorts call using the specified info level. Currently only info level
1 and 2 are supported. </Para></ListItem>
</ItemizedList>


<Para><ItemizedList MARK=Bullet>
<Term>spoolenumdata</Term><ListItem><Para>Enumerate all printer setting data stored
on the server. On Windows NT  clients, these values are stored  in the registry,
while Samba servers store them in the printers TDB.  This command corresponds
to the MS Platform SDK EnumPorts  function. </Para></ListItem>
</ItemizedList>


<Para><ItemizedList MARK=Bullet>
<Term>spooljobs &lt;printer&gt;</Term><ListItem><Para>List the jobs
and status of a given printer.  This command corresponds to the MS Platform
SDK EnumJobs function. </Para></ListItem>
</ItemizedList>


<Para><ItemizedList MARK=Bullet>
<Term>spoolopen &lt;printer&gt;</Term><ListItem><Para>Execute an OpenPrinterEx() and ClosePrinter()
RPC against a given printer. </Para></ListItem>
</ItemizedList>


<Para><ItemizedList MARK=Bullet>
<Term>spoolgetdata</Term><ListItem><Para>Retrive the data for a given printer
setting.  See the  <B>spoolenumdata</B> command for more information.  This command
corresponds to the GetPrinterData() MS Platform SDK function. </Para></ListItem>
</ItemizedList>


<Para><ItemizedList MARK=Bullet>
<Term>spoolgetprinter
&lt;printer&gt;</Term><ListItem><Para>Retrieve the current printer information.  This command sorresponds
to the GetPrinter() MS Platform SDK function. </Para></ListItem>
</ItemizedList>


<Para><ItemizedList MARK=Bullet>
<Term>spoolgetprinterdriver &lt;printer&gt;</Term><ListItem><Para>Retrive
the printer driver information (such as driver file, config file, dependent
files, etc...) for the given printer. This command corresponds to the GetPrinterDriver()
MS Platform  SDK function. </Para></ListItem>
</ItemizedList>


<Para><ItemizedList MARK=Bullet>
<Term>spoolgetprinterdriverdir &lt;arch&gt;</Term><ListItem><Para>Execute a GetPrinterDriverDirectory()
RPC to retreive the SMB share name and subdirectory for storing printer
driver files for a given architecture.  Possible values for &lt;arch&gt; are "Windows
4.0" (for Windows 95/98), "Windows NT x86", "Windows NT PowerPC", "Windows
Alpha_AXP", and "Windows NT R4000". </Para></ListItem>
</ItemizedList>


<Para> &lt;drivername&gt; &lt;port&gt;" .YODLTAGEND.  Add a
printer on the remote server.  This printer will be automatically shared.
 Be aware that the printer driver must already be installed on the server
(see <B>addprinterdriver</B>) and the &lt;port&gt; must be a valid port name. 

<Para><ItemizedList MARK=Bullet>
<Term>spooladdprinterdriver
&lt;arch&gt; &lt;config&gt;</Term><ListItem><Para>Execute an AddPrinterDriver() RPC to install the printer  driver
information on the server.  Note that the driver files should already exist
in the directort returned by  <B>spoolgetprinterdriverdir</B>.  Possible values
for &lt;arch&gt; are the same as those for the <B>spooolgetprintedriverdir</B> command.
The &lt;config&gt; parameter is defined as follows: </Para></ListItem>
</ItemizedList>


<Para><ItemizedList MARK=Bullet>
<Term>&lt;Long Printer Name&gt;:&lt;Driver File
Name&gt;:&lt;Data File Name&gt;:&lt;Config File Name&gt;:&lt;Help File Name&gt;:&lt;Language Monitor Name&gt;:&lt;Default
Data Type&gt;:&lt;Comma Separated list of Files&gt; </Term><ListItem><Para></Para></ListItem>
</ItemizedList>


<Para><ItemizedList MARK=Bullet>
<Term>Any empty fields should be enter
as the string "NULL". </Term><ListItem><Para></Para></ListItem>
</ItemizedList>


<Para><ItemizedList MARK=Bullet>
<Term>Samba does not need to support the concept of Print
Monitors </Term><ListItem><Para>since these only apply to local printers whose driver can make
use of a bi-directional link for communication.  This field should be "NULL".
 On a remote NT print server, the Print Monitor for a driver must already
be installed prior to adding the driver or else the RPC will fail. </Para></ListItem>
</ItemizedList>


<Para><ItemizedList MARK=Bullet>
<Term><B>General
Commands</B></Term><ListItem><Para></Para></ListItem>
<Term>set</Term><ListItem><Para>Set miscellaneous rpcclient command line options during a running
 session. </Para></ListItem>
</ItemizedList>


<Para><ItemizedList MARK=Bullet>
<Term>use</Term><ListItem><Para>Connect to a rmeote SMB server.  <B>rpcclient</B> has the ability to
maintain connections to multiple server simulaneously. </Para></ListItem>
</ItemizedList>


<Para><ItemizedList MARK=Bullet>
<Term>help</Term><ListItem><Para>Print a listing
of all known commands or extended help  on a particular command. </Para></ListItem>
</ItemizedList>


<Para><ItemizedList MARK=Bullet>
<Term>quit</Term><ListItem><Para>Exit
rpcclient. </Para></ListItem>
</ItemizedList>


<Para></RefSect1>

<RefSect1><Title>Bugs</Title>rpcclient is designed as a developer testing tool and may
not be robust in certain areas (such as command line parsing).  It has been
known to  generate a core dump upon failures when invalid parameters where
passed to the interpreter. 

<Para>From Luke Leighton's original rpcclient man page:
"WARNING! The MSRPC over SMB code has been developed from examining  Network
traces. No documentation is available from the original creators  (Microsoft)
on how MSRPC over SMB works, or how the individual MSRPC services  work.
Microsoft's implementation of these services has been demonstrated  (and
reported) to be... a bit flakey in places. 

<Para>The development of Samba's implementation
is also a bit rough, and as more  of the services are understood, it can
even result in versions of  <B><Command>smbd(8)</B></Command> and rpcclient that are incompatible
for some commands or  services. Additionally, the developers are sending
reports to Microsoft,  and problems found or reported to Microsoft are
fixed in Service Packs,  which may result in incompatibilities." 

<Para></RefSect1>

<RefSect1><Title>See Also</Title><B><Command>samba
(7)</B></Command> </RefSect1>

<RefSect1><Title>Author</Title>Samba is written by The Samba Team as Open Source. This man page
was written by Matthew Geddes, Luke Kenneth Casson, and Gerald Carter. </RefSect1>

</RefEntry>
