<!DOCTYPE refentry PUBLIC "-//OASIS//DTD DocBook V4.1//EN">
<refentry id="smbpasswd" lang="pl">
<refmeta>
    <refentrytitle>smbpasswd</refentrytitle>
    <manvolnum>8</manvolnum>
</refmeta>

<refnamediv>
    <refname>smbpasswd</Refname>
    <refpurpose>zmienia has³o SMB u¿ytkownika</refpurpose>
</refnamediv>

<refsynopsisdiv>
      <cmdsynopsis>
	<command>smbpasswd</command>
	<arg choice="opt">-a</arg>
	<arg choice="opt">-x</arg>
	<arg choice="opt">-d</arg>
	<arg choice="opt">-e</arg>
	<arg choice="opt">-D poziom debugowania</arg>
	<arg choice="opt">-n</arg>
	<arg choice="opt">-r zdalna maszyna</arg>
	<arg choice="opt">-R kolejnosc odwzorowywania nazw</arg>
	<arg choice="opt">-m</arg>
	<arg choice="opt">-j DOMENA</arg>
	<arg choice="opt">-U nazwauzytkownika[%password]</arg>
	<arg choice="opt">-h</arg>
	<arg choice="opt">-s</arg>
	<arg choice="opt">nazwauzytkownika</arg>
      </cmdsynopsis>
</refsynopsisdiv>

<refsect1>
      <title>OPIS</title>

      <para>Ten program jest czê¶ci± pakietu <ulink url="samba.7.html">
	  Samba</ulink>.</para>

      <para>Program smbpasswd ma kilka ró¿nych funkcji, zale¿nie czy
	jest uruchamiany przez u¿ytkownika <emphasis>root</emphasis>,
	czy nie. Gdy jest uruchamiany jako normalny u¿ytkownik, pozwala
	mu (u¿ytkownikowi) zmieniæ has³o SMB na ka¿dej maszynie która
	przechowuje takie ha³a.</para>

      <para>Domy¶lnie (przy uruchamianiu bez argumentów) spróbuje
	zmieniæ has³o SMB bie¿±cego u¿ytkownika na lokalnej maszynie.
	Jest to podobne do dzia³ania programu <command>passwd(1)</command>.
	Jednak¿e <command>smbpasswd</command> ró¿ni siê od <command>passwd
	</command> tym, ¿e nie jest programem <emphasis>setuid root
	</emphasis>, ale dzia³a w trybie klient-serwer i komunikuje siê
	z lokalnie dzia³aj±cym smbd. W konsekwencji, aby zakoñczy³o siê
	to sukcesem, demon smbd musi byæ uruchomiony na lokalnej maszynie.
	Na maszynie UNIX zakodowane has³a SMB s± zwykle przechowywane w
	pliku <ulink url="smbpasswd.5.html"><filename>smbpasswd(5)</filename>
	</ulink>.</para>

      <para>Gdy jest uruchomiony bez ¿adnych opcji przez zwyk³ego
	u¿ytkownika, <command>smbpasswd</command> zapyta o stare has³o,
	a potem o nowe dwukrotnie, aby upewniæ siê, ¿e nowe has³o by³o
	wpisane poprawnie. Nie bêdzie echa na ekranie podczas wpisywania.
	Je¶li masz puste has³o smb (okre¶lone przez ³añcuch "NO PASSWORD"
	w pliku <filename>smbpasswd</filename>), wtedy po prostu naci¶nij
	klawisz &lt;Enter&gt; przy pytaniu o stare has³o.</para>

      <para>smbpasswd mo¿e byæ równie¿ u¿yty przez zwyk³ego u¿ytkownika
	do zmiany has³a SMB na zdalnych maszynach, takich jak G³owne
	Kontrolery Domeny Windows NT (NT PDC). Zobacz ni¿ej opcje
	(<parameter>-r</parameter>) i <parameter>-U</parameter>.</para>

      <para>Gdy jest uruchomiony przez root'a, <command>smbpasswd</command>
	pozwala dodawaæ i usuwaæ u¿ytkowników w pliku <filename>smbpasswd(5)
	</filename>, jak równie¿ zmieniaæ atrybuty u¿ytkowników w tym pliku.
	Gdy uruchomiony przez root'a, <command>smbpasswd</command> ma dostêp
	do lokalnego pliku <filename>smbpasswd(5)</filename> bezpo¶rednio,
	umo¿liwiaj±c w ten sposób zmiany nawet, je¶li smbd nie jest
	uruchomiony.</para>
</refsect1>

<refsect1>
      <title>OPCJE</title>

      <variablelist>
	
	<varlistentry>
	  <term>-a</term>
	  <listitem><para>Ta opcja okre¶la, ¿e nazwa u¿ytkownika powinna
	      byæ dodana do lokalnego pliku <filename>smbpasswd(5)</filename>
	      z nowym has³em (naci¶nij &lt;Enter&gt; jako stare has³o). Ta
	      opcja jest ignorowana je¶li nazwa u¿ytkownika ju¿ istnieje w
	      pliku <filename>smbpasswd(5)</filename> i jest wówczas
	      traktowana jak polecenie regularnej zmiany has³a. Zauwa¿, ¿e
	      u¿ytkownik aby byæ dodanym, <emphasis>musi</emphasis> ju¿ istnieæ
	      w systemowym pliku hase³ (zwykle /etc/passwd), albo ¿±danie
	      dodania u¿ytkownika zakoñczy siê niepowodzeniem.</para>

	    <para>Ta opcja jest dostêpna tylko podczas uruchamiania <command>
		smbpasswd</command> jako root.</para></listitem>
	</varlistentry>

	<varlistentry>
	  <term>-x</term>
	  <listitem><para>Ta opcja okre¶la, ¿e podana nazwa u¿ytkownika
	      powinna byæ usuniêta z lokalnego pliku <filename>smbpasswd
		(5)</filename>.</para>

	    <para>Ta opcja jest dostêpna tylko podczas uruchamiania <command>
		smbpasswd</command> jako root.</para></listitem>
	</varlistentry>

	<varlistentry>
	  <term>-d</term>
	  <listitem><para>Ta opcja okre¶la, ¿e podana nazwa u¿ytkownika
	      powinna byæ <emphasis>wy³±czona</emphasis> w lokalnym pliku
	      <filename>smbpasswd(5)</filename>. Jest to wykonywane przez
	      wpisanie flagi <emphasis>'D'</emphasis> w miejsce kontrolne konta
	      w pliku <filename>smbpasswd(5)</filename>. Gdy zostanie to
	      zrobione, wszystkie próby autentykacji poprzez SMB, przy u¿yciu
	      tej nazwy u¿ytkownika zakoñcz± siê niepowodzeniem.</para>

	    <para>Je¶li plik <filename>smbpasswd(5)</filename> jest w 'starym'
	      formacie (format pre-Samba 2.0) nie ma wówczas ¿adnego miejsca
	      we wpisie has³a u¿ytkownika do zapisania tej informacji, wiêc
	      jest on wy³±czany przez wpisanie znaków 'X' w miejsce has³a w
	      pliku <filename>smbpasswd(5)</filename>. Zobacz <filename>
		smbpasswd(5)</filename> aby dowiedzieæ siê szczegó³ów o
	      'starym' i nowym formacie plików. </para>

	    <para>Ta opcja jest dostêpna tylko podczas uruchamiania <command>
		smbpasswd</command> jako root.</para>
	</varlistentry>

	<varlistentry>
	  <term>-e</term>
	  <listitem><para>Ta opcja okre¶la, ¿e podana nazwa u¿ytkownika ma
	      byæ <emphasis>w³±czona</emphasis> w lokalnym pliku <filename>
		smbpasswd(5)</filename>, je¶li konto zosta³ wcze¶niej wy³±czone.
	      Je¶li konto nie by³o wy³±czone, ta opcja jest bez efektu. Gdy
	      konto jest w³±czone, wtedy u¿ytkownik bêdzie móg³ dokonywaæ
	      ponownie autentykacji poprzez SMB.</para>

	    <para>Je¶li plik smbpasswd jest w 'starym' formacie, wtedy
	      <command>smbpasswd</command> zapyta o nowe has³o dla tego
	      u¿ytkownika. W przeciwnym wypadku konto bêdzie w³±czone przez
	      usuniêcie flagi <emphasis>'D'</emphasis> z miejsca kontrolnego
	      konta w pliku <filename>smbpasswd(5)</filename>. Zobacz plik
	      <filename>smbpasswd(5)</filename>  aby dowiedzieæ siê szczegó³ów
	      o 'starym' i nowym formatcie plików.</para>

	    <para>Ta opcja jest dostêpna tylko podczas uruchamiania <command>
		smbpasswd</command> jako root.</para>
	</varlistentry>

	<varlistentry>
	  <term>-D poziomdebugowania</term>
	  <listitem><para>poziom debugowania jest liczb± ca³kowit± od 0 do 10.
	      Domy¶ln± warto¶ci±, je¶li ten parametr nie jest okre¶lony, jest
	      zero.</para>

	    <para>Im wiêksza jest to warto¶æ, tym wiêcej detali bêdzie
	      logowanych w plikach logu na temat aktywno¶ci serwera. Na poziomie
	      0, tylko krytyczne b³êdy i powa¿ne ostrze¿enia bêd± rejestrowane.
	    </para>

	    <para>Poziomy ponad 1 bêd± generowaæ znaczne ilo¶ci informacji
	      logu i powinny byæ u¿ywane tylko podczas ¶ledzenia problemu.
	      Poziomy ponad 3 s± zaprojektowane tylko dla u¿ytku developerów
	      i generuj± OGROMNE ilo¶ci danych logu, w wiêkszo¶ci ekstremalnie
	      zagadkowych.</para>
	</varlistentry>

	<varlistentry>
	  <term>-n</term>
	  <listitem><para>Ta opcja okre¶la, ¿e nastêpuj±ca po niej nazwa
	      u¿ytkownika powinna mieæ has³o ustawione na null (tj. puste
	      has³o) w lokalnym pliku <command>smbpasswd</command>. Odbywa
	      siê to przez wpisanie znaków "NO PASSWORD" jako pierwsza czê¶æ
	      pierwszego has³a przechowywanego w pliku <filename>smbpasswd
	      </filename>.</para>

	    <para>Zauwa¿, ¿e aby pozwoliæ u¿ytkownikom na logowanie siê do
	      serwera Samba gdy has³o zosta³o ustawione na "NO PASSWORD" w
	      pliku <filename>smbpasswd</filename>, administrator musi ustawiæ
	      nastêpuj±cy parametr w sekcji [global] pliku <filename>smb.conf
	      </filename>:</para>

	    <para><command>null passwords = yes</command></para>

	    <para>Ta opcja jest dostêpna tylko podczas uruchamiania <command>
		smbpasswd</command> jako root.</para></listitem>
	</varlistentry>

	<varlistentry>
	  <term>-r nazwa zdalnej maszyny</term>
	  <listitem><para>Ta opcja pozwala u¿ytkownikowi okre¶liæ na jakiej
	      maszynie chce zmieniæ swoje has³o. Bez tego parametru <command>
		smbpasswd</command> domy¶lnie przyjmuje lokalnego hosta.
	      <replaceable>nazwa zdalnej maszyny</replaceable> jest nazw±
	      NetBIOS serwera SMB/CIFS z którym nale¿y siê skontaktowaæ aby
	      dokonaæ zmiany has³a. Ta nazwa jest odwzorowana na adres IP
	      u¿ywaj±c standardowego mechanizmu odwzorowania nazw we wszystkich
	      programach pakietu Samba. Zobacz parametr <parameter>-R name
		resolve order</parameter> aby dowiedzieæ siê szczegó³ów na
	      temat zmiany tego mechanizmu.</para>

	    <para>Nazwa u¿ytkownika którego has³o bêdzie zmienione jest nazw±
	      aktualnie zalogowanego u¿ytkownika UNIX. Zobacz parametr
	      <parameter>-U nazwauzytkownika</parameter> aby dowiedzieæ siê
	      szczegó³ów na temat zmieniania has³a dla innej nazwy u¿ytkownika.
	    </para>

	    <para>Zauwa¿, ¿e je¶li zmieniasz has³o w domenie Windows NT,
	      okre¶lona zdalna maszyna musi byæ G³ównym Kontrolerem Domeny
	      (PDC) dla domeny (Zapasowe Kontrolery Domeny (BDC) maj± kopiê
	      tylko-do-odczytu bazy danych kont u¿ytkowników i nie pozwol±
	      na zmianê has³a).</para>

	    <para><emphasis>Zauwa¿</emphasis>, ¿e Windows 95/98 nie maj±
	      prawdziwej bazy danych hase³, wiêc jest niemo¿liwe ¿eby zmieniæ
	      has³o okre¶laj±c maszynê Win95/98 jako docelow± zdaln± maszynê³.
	    </para></listitem>
	</varlistentry>

	<varlistentry>
	  <term>-R kolejnosc odwzorowania nazw</term>
	  <listitem><para>Ta opcja pozwala u¿ytkownikowi programu smbpasswd
	      okre¶liæ jakich us³ug odwzorowania nazw u¿yæ podczas szukania
	      nazwy NetBIOS hosta do którego jest pod³±czany.</para>

	    <para>Tymi opcjami s± :"lmhosts", "host", "wins" i "bcast".
	      Powoduj± one, ¿e nazwy s± odwzorowywane jak poni¿ej:</para>

	    <itemizedlist>
	      <listitem><para><constant>lmhosts</constant> : Szukaj adresu
		  IP w pliku Samba lmhosts.</para></listitem>
	      <listitem><para><constant>host</constant> : Przeprowad¼
		  standardowe odwzorowanie nazwy hosta na adres IP przy u¿yciu
		  systemowego szukania <filename>/etc/hosts</filename>, NIS
		  lub DNS. Ta metoda rozwi±zywania nazwy jest zale¿na od
		  systemu operacyjnego. Przyk³adowo w systemie IRIX lub
		  Solaris mo¿e to byæ kontrolowane przez plik <filename>
		    /etc/nsswitch.conf</filename>.</para></listitem>
	      <listitem><para><constant>wins</constant> : Zapytaj o nazwê pod
		  adresem IP wymienionym w parametrze <parameter>wins server
		  </parameter> w pliku <filename>smb.conf</filename>. Je¶li
		  ¿aden serwer WINS nie zosta³ okre¶lony, ta metoda zostanie
		  zignorowana.</para></listitem>
	      <listitem><para><constant>bcast</constant> : Wykonaj rozg³aszanie
		  na ka¿dym ze znanych lokalnych interfejsów wymienionym w
		  parametrze <parameter>interfaces</parameter> w pliku smb.conf.
		  Jest to najmniej skuteczna spo¶ród wszystkich metoda
		  odwzorowania nazw, jako ¿e zale¿y od istnienia docelowego
		  hosta w lokalnie pod³±czonej podsieci.</para></listitem>
	    </itemizedlist>

	    <para>Domy¶ln± kolejno¶ci± jest lmhosts, host, wins, bcast, i bez
	      tego parametru oraz ¿adnego wpisu w pliku <filename>smb.conf
	      </filename>, metody odwzorowania nazw bêd± wypróbowane w tej
	      kolejno¶ci.</para>
	</varlistentry>

	<varlistentry>
	  <term>-m</term>
	  <listitem><para>Ta opcja mówi smbpasswd ¿e zmieniane konto jest
	      kontem MASZYNY. Obecnie jest to stosowane, gdy Samba jest u¿ywana
	      jako G³ówny Kontroler Domeny NT (NT PDC).</para>

	    <para>Ta opcja jest dostêpna jedynie podczas uruchamiania
	      smbpasswd jako root.</para></listitem>
	</varlistentry>

	<varlistentry>
	  <term>-j DOMENA</term>
	  <listitem><para>Ta opcja jest u¿ywana aby dodaæ serwer Samba do
	      Domeny Windows NT jako cz³onka Domeny mog±cego autentykowaæ
	      konta u¿ytkowników na Kontrolerze Domeny w ten sam sposób, co
	      Windows NT Server. Zobacz opcjê <command>security=domain
	      </command> na stronie podrêcznika <filename>smb.conf(5)
	      </filename>.</para>

	    <para>Aby u¿yæ serwera Samba w ten sposób, Administrator Domeny
	      Windows NT musi u¿yæ programu "Server Manager for Domains"
	      ¿eby dodaæ g³ówn± nazwê NetBIOS serwera Samba jako cz³onka
	      Domeny.</para>

	    <para>Gdy to zostanie zrobione, aby przy³±czyæ siê do Domeny
	      wywo³aj <command>smbpasswd</command> z tym parametrem.
	      smbpasswd poszuka wtedy G³ównego Kontrolera Domeny dla tej
	      Domeny (umieszczonego w pliku <filename>smb.conf</filename>
	      w parametrze <parameter>password server</parameter>)
	      i zmieni has³o konta maszyny u¿ywane do tworzenia chronionej
	      komunikacji w Domenie. To has³o jest wówczas przechowywane
	      w TDB, zapisywalnym tylko przez root'a, o nazwie <filename>
		secrets.tdb</filename>.</para>

	    <para>Gdy tylko ta operacja jest przeprowadzona, plik <filename>
		smb.conf</filename> mo¿e byæ zaktualizowany, aby ustawiæ
	      opcjê <parameter>security=domain</parameter> i wszystkie
	      przysz³e logowania do serwera Samba bêd± autentykowane na
	      Windows NT PDC.</para>

	    <para>Zauwa¿, ¿e nawet je¶li autentykacja jest przeprowadzana
	      przez PDC, wszyscy u¿ytkownicy korzystaj±cy z serwera Samba
	      musz± nadal mieæ wa¿ne konto UNIX na tej maszynie.</para>

	    <para>Ta opcja jest dostêpna jedynie podczas uruchamiania
	      smbpasswd jako root.</para></listitem>
	</varlistentry>

	<varlistentry>
	  <term>-U nazwauzytkownika</term>
	  <listitem><para>Ta opcja mo¿e byæ u¿yta tylko w po³±czeniu
	      z opcj± <parameter>-r</parameter>. Podczas zmieniania has³a
	      na zdalnej maszynie pozwala ona u¿ytkownikowi na okre¶lenie
	      nazwy u¿ytkownika na tej maszynie, na której has³o bêdzie
	      zmienione. Opcja ta jest obecna, aby umo¿liwiæ u¿ytkownikom
	      którzy maj± ró¿ne nazwy u¿ytkowników na ró¿nych systemach, na
	      zmianê tych hase³.</para></listitem>
	</varlistentry>

	<varlistentry>
	  <term>-h</term>
	  <listitem><para>Ta opcja wy¶wietla tekst pomocy dla <command>
		smbpasswd</command>, wybieraj±c poprawny dla uruchamiania
	      jako root lub jako zwyczajny u¿ytkownik.</para></listitem>
	</varlistentry>

	<varlistentry>
	  <term>-s</term>
	  <listitem><para>Ta opcja powoduje, ¿e smbpasswd zachowuje ciszê
	      (tzn. nie zadaje pytañ) i czyta jego stare i nowe has³± ze
	      standardowego wej¶cia, zamiast z <filename>/dev/tty</filename>
	      (jak program <command>passwd(1)</command>). Ta opcja jest po
	      to, aby pomóc ludziom pisz±cym skrypty u¿ywaj±ce smbpasswd.
	    </para></listitem>
	</varlistentry>

	<varlistentry>
	  <term>nazwauzytkownika</term>
	  <listitem><para>To okre¶la nazwê u¿ytkownika na której operowaæ,
	      przy wszystkich opcjach <emphasis>tylko root</emphasis>. Tylko
	      root mo¿e okre¶liæ ten parametr, jako ¿e tylko root ma
	      uprawnienia potrzebne do modyfikacji atrybutów bezpo¶rednio w
	      lokalnym pliku smbpasswd.</para></listitem>
	</varlistentry>
      </variablelist>
</refsect1>

<refsect1>
      <title>NOTATKI</title>
     
      <para>Poniewa¿ <command>smbpasswd</command> pracuje w trybie klient-serwer
	komunikuj±c siê z lokalnym smbd, aby to dzia³a³o dla u¿ytkownika
	innego ni¿ root, demon smbd musi byæ uruchomiony. Powszechnym
	problemem jest dodanie restrykcji dla hostów, które mog± mieæ
	dostêp do <command>smbd</command> uruchomionego na lokalnej maszynie,
	poprzez okre¶lanie wpisu <parameter>allow hosts</parameter> lub
	<parameter>deny hosts</parameter> w pliku <filename>smb.conf</filename>
	i przeoczenie udzielenia dostêpu "localhost" do smbd.</para>

      <para>Dodatkowo, polecenie smbpasswd jest u¿yteczne tylko, je¶li
	Samba zosta³a ustawiona na korzystanie z kodowanych hase³. Zobacz
	plik <filename>ENCRYPTION.txt</filename> w katalogu docs, aby dowiedzieæ
	siê szczegó³ów jak to zrobiæ.</para>
</refsect1>

<refsect1>
      <title>WERSJA</title>
      
      <para>Ta strona podrecznika jest poprawna dla wersji 2.2 pakietu Samba.
      </para>
</refsect1>

<refsect1>
      <title>ZOBACZ TE¯</title>

      <para><ulink url="smbpasswd.5.html"><filename>smbpasswd(5)</filename></ulink>,
	<ulink url="samba.7.html">samba(7)</ulink>
      </para>
</refsect1>

<refsect1>
      <title>AUTOR</title>

      <para>Pierwotnie, Samba i zwi±zane z ni± oprogramowanie by³y stworzone
	przez Andrew Tridgella. Samba jest teraz rozwijana przez Zespó³ Samba
	jako projekt Open Source podobnie jak j±fro Linux.</para>

      <para>Pierwotnie, strony podrêcznika Samba zosta³y napisane przez Karla
	Auera. Kody ¼rod³owe tych stron zosta³y przekonwertowane do formatu
	YODL (kolejny ¶wietny kawa³ek oprogramowania Open Source dostêpny na
	<ulink url="ftp://ftp.icce.rug.nl/pub/unix/">
	  ftp://ftp.icce.rug.nl/pub/unix/</ulink>) i zaktualizowane do wydania
	2.0 samby przez Jeremy Allisona. Konwersja do DocBook dla Samba 2.2
	zosta³a wykonana przez Geralda Cartera. T³umaczenie na jêzyk polski
	i konwersjê polskiej wersji do DocBook wykona³ Rafa³ Szcze¶niak.
      </para>
</refsect1>

</refentry>
