<!DOCTYPE refentry PUBLIC "-//OASIS//DTD DocBook V4.1//EN">
<refentry ID="rpcclient" lang="pl">

<refmeta>
    <refentrytitle>rpcclient</refentrytitle>
    <manvolnum>1</manvolnum>
</refmeta>

<refnamediv>
    <refname>rpcclient</refname>
    <refpurpose>narzêdzie developera do testowania funkcji
    MS-RPC po stronie klienta</refpurpose>
</refnamediv>

<refsynopsisdiv>
    <cmdsynopsis>
      <command>rpcclient</command>
      <arg choice="req">serwer</arg>
      <arg choice="opt">-A nazwapliku</arg>
      <arg choice="opt">-c &lt;tekst polecenia&gt;</arg>
      <arg choice="opt">-d poziomdebugowania</arg>
      <arg choice="opt">-h</arg>
      <arg choice="opt">-l pliklogu</arg>
      <arg choice="opt">-N</arg>
      <arg choice="opt">-s &lt;plik konfiguracyjny smb&gt;</arg>
      <arg choice="opt">-U nazwauzytkownika[%haslo]</arg>
      <arg choice="opt">-W gruparobocza</arg>
    </cmdsynopsis>
</refsynopsisdiv>

<refsect1>
      <title>OPIS</title>
      
      <para>Ten program jest czê¶ci± pakietu <ulink url="samba.7.html">
      Samba</ulink>.</para>

      <para><command>rpcclient</command> jest programem dla developerów,
      do wykonywania ro¿nych funkcji MS-RPC. Jego g³ównym zastosowaniem
      jest testowanie w³asnej implementacji serwera MS-RPC Samby. Tym niemniej,
      wielu administratorów napisa³o skrypty wykorzystuj±ce go do zarz±dzania
      klientami Windows NT z ich stacji roboczej UNIX.</para>
</refsect1>

<refsect1>
    <title>OPCJE</title>

    <variablelist>
      <varlistentry>
	<term>serwer</term>
	<listitem><para>nazwa NetBIOS serwera do którego chcesz siê pod³±czyc.
	    Serwer mo¿e byæ jakimkolwiek serwerem SMB/CIFS. Nazwa jest odwzorowana
	    przy u¿yciu linii <ulink url="smb.conf.5.html#NAMERESOLVEORDER">
	      <parameter>name resolve order</parameter></ulink> lub przy u¿yciu
	    opcji z <filename>smb.conf(5)</filename>.</para>
	</listitem>
      </varlistentry>

      <varlistentry>
	<term>-A nazwapliku</term>
	<listitem><para>Ta opcja pozwala ci okre¶liæ plik z którego ma byæ
	    odczytana nazwa u¿ytkownika i has³o u¿yte do po³±czenia. Format
	    pliku to </para>
	  
	  <para><programlisting>
	  username = &lt;wartosc&gt;
	  password = &lt;wartosc&gt;
	  domain   = &lt;wartosc&gt;
	  </programlisting></para>

	  <para>Upewnij siê, ¿e ustawione uprawnienia do pliku zabraniaj±
	    dostêpu niechcianym u¿ytkownikom.</para></listitem>
      </varlistentry>

      <varlistentry>
	<term>-c 'tekst polecenia'</term>
	<listitem><para>wykonuje polecenia oddzielone ¶rednikami
	    (wymienione dalej).</para></listitem>
      </varlistentry>
	  
      <varlistentry>
	<term>-d poziomdebugowania</term>
	<listitem><para>ustawia poziom debugowania. Poziom 0 jest
	    najmniejszy, a 100 jest najwiêkszy. Powinien byæ ustawiony
	    na 100 je¶li planujesz wys³aæ raport o b³êdzie do zespo³u
	    Samba (zobacz <filename>BUGS.txt</filename>).</para>
	</listitem>
      </varlistentry>

      <varlistentry>
	<term>-h</term>
	<listitem><para>Wy¶wietl podsumowanie opcji linii polecenia.
	  </para></listitem>
      </varlistentry>

      <varlistentry>
	<term>-l pliklogu</term>
	<listitem><para>Nazwa dla plików logu/debugowania. ".klient" zostanie
	    dopisane. Plik logu nigdy nie jest usuwany przez klienta.
	  </para></listitem>
      </varlistentry>

      <varlistentry>
	<term>-N</term>
	<listitem><para>mówi programowi <command>rpcclient</command>, ¿eby
	    nie pyta³ o has³o. Domy¶lnie, <command>rpcclient</command>
	    bêdzie pyta³ u¿ytkownika o has³o. Zobacz te¿ opcjê <parameter>
	      -U</parameter>.</para></listitem>
      </varlistentry>

      <varlistentry>
	<term>-s &lt;plik konfiguracyjny smb&gt;</term>
	<listitem><para>Okre¶la lokalizacjê pliku <filename>smb.conf
	    </filename>.</para></listitem>
      </varlistentry>

      <varlistentry>
	<term>-U nazwau¿ytkownika[%haslo]</term>
	<listitem><para>Ustawia nazwê SMB u¿ytkownika lub nazwê u¿ytkownika
	    i has³o.</para>

	  <para>Je¶li %has³o nie jest podane, u¿ytkownik bêdzie o nie zapytany.
	    Klient najpierw sprawdzi zmienn± ¶rodowiskow± <envar>USER</envar>, potem
	    zmienn± <envar>LOGNAME</envar> i je¶li ktora¶ istnieje, jest konwertowana
	    do du¿ych liter. Je¶li te zmienne nie zostan± znalezione, nazw±
	    u¿ytkownika jest <constant>GUEST</constant>.</para>

	  <para>Trzeci± opcj± jest u¿ycie pliku referencji, który zawiera nazwê
	    u¿ytkownika i has³o jako czysty tekst. Ta opcja jest dostarczona przede
	    wszystkim do skryptów w których admin nie chce podawaæ referencji w linii
	    poleceñ albo poprzez zmienne ¶rodowiskowe. Je¶li ta metoda zostanie u¿yta,
	    upewnij siê ¿e uprawnienia do pliku ograniczaj± dostêp przed niechcianymi
	    u¿ytkownikami. Zobacz <parameter>-A</parameter> aby dowiedzieæ siê
	    szczegó³ów.</para>

	  <para>B±d¼ ostro¿ny, co do umieszczania hase³ w skryptach. W wielu systemach
	    linia poleceñ dzia³aj±cego procesu mo¿e byæ widoczna poprzez komendê
	    <command>ps</command>. Dla bezpieczeñstwa zawsze pozwól programowi
	    <command>rpcclient</command>, aby zapyta³ ciê o has³o i wpisz je
	    bezpo¶rednio.</para>
	</listitem>
      </varlistentry>

	<varlistentry>
	  <term>-W domena</term>
	  <listitem><para>Ustawia domenê SMB dla nazwy u¿ytkownika. Uniewa¿nia
	  to domy¶lne ustawienie domeny, która jest domen± serwera okre¶lonego za
	  pomoc± opcji <parameter>-S</parameter>. Je¶li podana domena jest taka
	  sama jak nazwa NetBIOS serwera spowoduje to, ¿e klient zostanie zalogowany
	  przy u¿yciu lokalnego SAM serwera (w przeciwieñstwie do SAM domeny).
	  </para></listitem>
	</varlistentry>

      </variablelist>
</refsect1>

<refsect1>
      <title>POLECENIA</title>

      <para><emphasis>LSARPC</emphasis></para>
      <itemizedlist>
	<listitem><para><command>lsaquery</command></para></listitem>
	<listitem><para><command>lookupsids</command></para></listitem>
	<listitem><para><command>lookupnames</command></para></listitem>
	<listitem><para><command>enumtrusts</command></para></listitem>
      </itemizedlist>

      <para><emphasis>SAMR</emphasis></para>
      <itemizedlist>
	<listitem><para><command>queryuser</command></para></listitem>
	<listitem><para><command>querygroup</command></para></listitem>
	<listitem><para><command>queryusergroups</command></para></listitem>
	<listitem><para><command>querygroupmem</command></para></listitem>
      </itemizedlist>

      <para><emphasis>SPOOLSS</emphasis></para>
      <itemizedlist>
	<listitem>
	  <para><command>adddriver &lt;arch&gt; &lt;config&gt;</command>
	    - Wykonuje wywo³anie RPC AddPrinterDriver() aby zainstalowaæ informacje o
	    sterowniku drukarki na serwerze. Zwróæ uwagê¿, ¿e pliki sterownika powinny
	    ju¿ byæ w katalogu zwracanym przez <command>getdriverdir</command>. Mo¿liwe
	    warto¶ci dla <parameter>arch</parameter> s± takie same, jak w poleceniu
	    <command>getdriverdir</command>. Parametr <parameter>konfig</parameter>
	    jest zdefiniowany jak poni¿ej.</para>

	  <para><programlisting>
	      Dluga Nazwa Drukarki:\
	      Nazwa Pliku Sterownika:\
	      Nazwa Pliku z Danymi:\
	      Nazwa Pliku Konfiguracyjnego:\
	      Nazwa Pliku Pomocy:\
	      Nazwa Monitora Jezyka:\
	      Domyslny Typ Danych:\
	      lista Plikow oddzielonych przecinkami
	  </programlisting></para>

	  <para>Ka¿de puste pole powinno byæ wprowadzone jako ³añcuch "NULL".</para>

	  <para>Samba nie potrzebuje wspieraæ koncepcji Monitorów Drukarki (Print Monitors,
	  przyp.t³um.) poniewa¿ dotycz± one tylko lokalnych drukarek, których sterownik
	  potrafi korzystaæ z dwukierunkowego po³±czenia do komunikacji. To pole powinno
	  byæ "NULL". Na zdalnym serwerze wydruku NT, Monitor Drukarki dla sterownika
	  musi byæ zainicjalizowany przed dodaniem sterownika albo wywo³anie RPC zakoñczy
	  siê b³êdem.</para></listitem>

	<listitem><para><command>enumdata</command> - Wymienia wszystkie dane na
	    temat ustawienia drukarki przechowywane na serwerze. W klientach Windows NT,
	    warto¶ci te s± przechowywane w rejestrze, podczas gdy serwery Samba
	    przechowuj± je w TDB drukarek. To polecenie odpowiada funkcji GetPrinterData()
	    z MS Platform SDK (* To polecenie nie jest obecnie zaimplementowane).</para>
	</listitem>

	<listitem><para><command>enumjobs &lt;drukarka&gt;</command> - Wylicza
	    zadania do wydruku i status podanej drukarki. To polecenie odpowiada
	    funkcji EnumJobs() z MS Platform SDK (* To polecenie nie jest obecnie
	    zaimplementowane).</para>
	</listitem>

	<listitem><para><command>enumports [poziom]</command> - Wykonuje wywo³anie
	    EnumPorts przy u¿yciu okre¶lonego poziomu informacyjnego. Obecnie, tylko
	    poziom 1 i 2 s± wspierane. </para>
	</listitem>

	<listitem><para><command>enumdrivers [poziom]</command> - Wykonuje wywo³anie
	    EnumPrinterDrivers(). Wymienia ono ró¿ne zainstalowane sterowniki drukarek
	    dla wszystkich architektur. Zajrzyj do dokumentacji MS Platform SDK aby
	    dowiedzieæ siê wiêcej szczegó³ów na temat ró¿nych flag i opcji wywo³ania.
	    Obecnie wspierane s± poziomy informacyjne 0, 1 i 2.</para>
	</listitem>

	<listitem><para><command>enumprinters [poziom]</command> - Wykonuje wywo³anie
	    EnumPrinters(). Wymienia ono ró¿ne zainstalowane i wspó³dzielone drukarki.
	    Zajrzyj do dokumentacji MS Platform SDK po wiêcej szczegó³ów na temat
	    ró¿nych flag i opcji wywo³ania. Obecnie wspierane s± poziomy informacyjne
	    0, 1 i 2.</para>
	</listitem>

	<listitem><para><command>getdata &lt;printername&gt;</command> - Pobiera
	    dane na temat ustawieñ danej drukarki. Zobacz polecenie <command>enumdata</command>
	    aby uzyskaæ wiêcej informacji. Polecenie to odpowiada funkcji GetPrinterData()
	    z MS Platform SDK (* To polecenie nie jest obecnie zaimplementowane).</para>
	</listitem>

	<listitem><para><command>getdriver &lt;nazwadrukarki&gt;</command> - Pobiera
	    informacje o sterowniku (takie jak plik sterownika, plik konfiguracyjny,
	    pliki zale¿ne, itd.) dla danej drukarki. To polecenie odpowiada funkcji
	    GetPrinterDriver() z MS Platform SDK. </para>
	</listitem>

	<listitem><para><command>getdriverdir &lt;arch&gt;</command> - Wykonuje wywo³anie
	    RPC GetPrinterDriverDirectory() aby pobraæ nazwê wspó³dzielonego zasobu SMB
	    i podkatalog przechowuj±cy pliki sterownika drukarki dla danej architektury.
	    Mo¿liwymi warto¶ciami dla <parameter>arch</parameter> s± "Windows 4.0"
	    (dla Windows 95/98), "Windows NT x86", "Windows NT PowerPC", "Windows Alpha_AXP"
	    i "Windows NT R4000".</para>
	</listitem>

	<listitem><para><command>getprinter &lt;nazwadrukarki&gt;</command> - Pobiera
	    bie¿±ce informacje o drukarce. To polecenie odpowiada funkcji GetPrinter()
	    z MS Platform SDK. </para>
	</listitem>

	<listitem><para><command>openprinter &lt;nazwadrukarki&gt;</command> - Wykonuje
	    wywo³ania RPC OpenPrinterEx() i ClosePrinter() na podanej drukarce.</para>
	</listitem>

	<listitem><para><command>setdriver &lt;nazwadrukarki&gt; &lt;nazwasterownika&gt;
	      </command> - Wykonuje polecenie SetPrinter() aby zaktualizowaæ sterownik
	    drukarki przypisany do zainstalowanej drukarki. Sterownik drukarki musi ju¿
	    byæ poprawnie zainstalowany na serwerze druku.</para>

	  <para> Zobacz te¿ polecenia <command>enumprinters</command> i <command>
	      enumdrivers</command> uzyskuj±ce listê zainstalowanych drukarek i
	      sterowników.</para>
	</listitem>

      </itemizedlist>


      <para><emphasis>OGÓLNE OPCJE</emphasis></para>

      <itemizedlist>
	<listitem><para><command>debuglevel</command> - Ustawia bie¿±cy poziom
	    debugowania u¿ywany do rejestrowania informacji.</para>
	</listitem>

	<listitem><para><command>help</command> - Wy¶wietla listê wszystkich
	  znanych poleceñ lub rozszerszon± pomoc na temat konkretnego polecenia.</para>
	</listitem>

	<listitem><para><command>quit (exit)</command> - Wychodzi z  programu
	    <command>rpcclient</command>.</para>
	</listitem>

	<listitem><para><command>set</command> - Ustawia ró¿ne opcje linii poleceñ
	      dla rpcclient podczas aktywnej sesji.</para>
	</listitem>

	<listitem><para><command>use</command> - £±czy z odleg³ym serwerem SMB.
	    <command>rpcclient</command> posiada mo¿liwo¶æ utrzymywania po³±czeñ
	    z wieloma serwerami jednocze¶nie.</para>
	</listitem>
    </itemizedlist>

</refsect1>

<refsect1>
      <title>B£ÊDY</title>

      <para><command>rpcclient</command> jest zaprojektowany jako developerskie
	narzêdzie testowe i mo¿e nie byæ odporny w pewnych obszarach (takich jak
	parsowanie linii poleceñ). Wiadomo, ¿e generuje "core dump" podczas awarii,
	kiedy nieprawid³owe parametry s± przekazywane interpreterowi.</para>

      <para>Z oryginalnej strony podrêcznika Luke Leighton'a:</para>
      
      <para><emphasis>"UWAGA!</emphasis> Kod MSRPC poprzez SMB jest rozwijany
	poprzez sprawdzanie tego co jest przesy³ane przez sieæ. ¯adna dokumentacja
	o tym, jak MSRPC przez SMB dzia³a, lub jak poszczególne us³ugi MSRPC dzia³aj±,
	nie jest dostêpna od oryginalnych twórców (Microsoft). Zosta³o ju¿ demonstrowane
	(i raportowane), ¿e implementacja tych us³ug w wykonaniu Microsoft'u jest
	... trochê zwariowana w pewnych miejscach.</para>

      <para>Proces rozwijania implementacji w Sambie jest równie¿ trochê nierównomierny,
	i w miarê jak coraz wiêcej us³ug jest rozumianych, mo¿e to nawet daæ w rezultacie
	wersje <command>smbd(8)</command> i <command>rpcclient(1)</command> które s±
	niekompatybilne z niektórymi poleceniami lub us³ugami. Dodatkowo, developerzy
	wysy³aj± raporty do Microsoft'u i problemy znalezione lub sygnalizowane Microsoft'owi
	s± poprawiane w Service Pack'ach, co mo¿e owocowaæ niekompatybilno¶ciami."
      </para>

</refsect1>

<refsect1>
    <title>WERSJA</title>

    <para>Ta strona podrêcznika jest poprawna dla wersji 2.2 pakietu
      Samba.</para>
</refsect1>

<refsect1>
      <title>AUTOR</title>

      <para>Oryginalne oprogramowanie Samba i programy dodatkowe zosta³y stworzone przez
	Andrew Tridgella. Samba jest teraz rozwijana przez Zespó³ Samba jako projekt
	Open Source w sposób podobny do j±dra Linux.</para>

      <para>Oryginalna strona podrêcznika by³a napisana przez Matthew Geddesa,
	Luke'a Kenntha Cassona i przepisana przez Geralda Cartera. Konwersja
	do DocBook dla Samba 2.2 zosta³a wykonana przez Geralda Cartera.
	T³umaczenie na jêzyk polski oraz konwersjê polskiej wersji do DocBook
	wykona³ Rafa³ Szcze¶niak.</para>
</refsect1>

</refentry>

<!-- Keep this comment at the end of the file
Local variables:
mode: sgml
sgml-omittag:t
sgml-shorttag:t
sgml-namecase-general:t
sgml-minimize-attributes:nil
sgml-always-quote-attributes:t
sgml-indent-step:2
sgml-indent-data:t
sgml-parent-document:nil
sgml-exposed-tags:nil
sgml-local-catalogs:("/usr/lib/sgml/catalog")
sgml-local-ecat-files:nil
End:
-->
