<!DOCTYPE refentry PUBLIC "-//OASIS//DTD DocBook V4.1//EN">
<refentry id="smbcacls" lang="pl">

<refmeta>
    <refentrytitle>smbcacls</refentrytitle>
    <manvolnum>1</manvolnum>
</refmeta>

<refnamediv>
    <refname>smbcacls</refname>
    <refpurpose>Ustaw lub pobierz ACLe pliku lub katalogu NT</refpurpose>
</refnamediv>

<refsynopsisdiv>
    <cmdsynopsis>
      <command>smbcacls</command>
	<arg choice="req">//serwer/wspoludzial</arg>
	<arg choice="req">nazwapliku</arg>
	<arg choice="opt">-U nazwauzytkownika</arg>
	<arg choice="opt">-A acle</arg>
	<arg choice="opt">-M acle</arg>
	<arg choice="opt">-D acle</arg>
	<arg choice="opt">-S acle</arg>
	<arg choice="opt">-C nazwa</arg>
	<arg choice="opt">-G nazwa</arg>
	<arg choice="opt">-n</arg>
	<arg choice="opt">-h</arg>
    </cmdsynopsis>
</refsynopsisdiv>

<refsect1>
    <title>OPIS</title>

    <para>To narzêdzie jest czê¶ci± pakietu <ulink url="samba.7.html">
	Samba</ulink>.</para>

    <para>Program smbcacls manipuluje Listami Kontroli Dostêpu NT
      (NT Access Control Lists, st±d spolszczenie liczby mnogiej - ACLe,
      przyp.t³um.) na wspó³udzia³ach plikowych SMB.</para>
</refsect1>

<refsect1>
    <title>OPCJE</title>

    <para>Nastêpuj±ce opcje s± dostêpne dla programu smbcacls. Format
      ACLi jest opisany w sekcji FORMAT ACL.</para>

    <variablelist>
      <varlistentry>
	<term>-A acle</term>
	<listitem><para>Dodaj ACLe okre¶lone na liscie ACL. Istniej±ce
	    wpisy kontroli dostêpu pozostaj± niezmienione.</para></listitem>
      </varlistentry>

      <varlistentry>
	<term>-M acle</term>
	<listitem><para>Zmodyfikuj warto¶æ maski (zezwolenia) dla ACLi podanych
	    w linii poleceñ. B³±d bêdzie wy¶wietlony dla ka¿dego podanego ACLa
	    który nie by³ obecny na li¶cie ACL.</para></listitem>
      </varlistentry>

      <varlistentry>
	<term>-D acle</term>
	<listitem><para>Usuñ ka¿dy ACL okre¶lony w linii poleceñ. B³±d bêdzie
	    wy¶wietlony dla ka¿dego ACLa który nie byæ obecny na li¶cie ACLi.
	  </para></listitem>
      </varlistentry>

      <varlistentry>
	<term>-S acle</term>
	<listitem><para>To polecenie ustawia na pliku tylko te ACLe, które
	    by³y podane w linii poleceñ. Wszystkie inne s± usuwane. Zauwa¿,
	    ¿e okre¶lone tu ACLe musz± zawieraæ przynajmniej rewizjê, typ,
	    w³a¶ciciela i grupê, ¿eby wywo³anie zakoñczy³o siê sukcesem.
	  </para></listitem>
      </varlistentry>

      <varlistentry>
	<term>-U nazwauzytkownika</term>
	<listitem><para>Okre¶la nazwê u¿ytkownika wykorzystan± do pod³±czenia
	    siê do okre¶lonej us³ugi. Nazwa mo¿e mieæ formê "nazwauzytkownika".
	    W tym przypadku u¿ytkownik jest poproszony o wpisanie has³a,
	    a u¿yta grupa robocza (workgroup) jest taka, jak okre¶lona w pliku
	    <filename>smb.conf</filename>. U¿yte mog± byæ te¿ "nazwauzytkownika%haslo"
	    lub "DOMENA\nazwauzytkownika%haslo" i wtedy has³o i grupa robocza
	    s± takie, jak dostarczone.</para></listitem>
      </varlistentry>

      <varlistentry>
	<term>-C nazwa</term>
	<listitem><para>W³a¶ciciel pliku lub katalogu mo¿e zostaæ zmieniony
	    na nazwê podan± przy u¿yciu opcji <parameter>-C</parameter>.
	    Nazw± mo¿e byæ sid w formie S-1-x-y-z lub nazwa odwzorowana
	    przez serwer okre¶lony w pierwszym argumencie.</para>

	  <para>To polecenie jest skrótem dla -M WLASCICIEL:nazwa.
	  </para></listitem>
      </varlistentry>

      <varlistentry>
	<term>-G nazwa</term>
	<listitem><para>W³a¶ciciel grupowy pliku lub katalogu mo¿e byæ
	    zmieniony na nazwê podan± przy u¿yciu opcji <parameter>-G
	    </parameter>. Nazw± mo¿e byæ sid w formie S-1-x-y-z lub
	    nazwa odwzorowana przez serwer okre¶lony w pierwszym argumencie.
	  </para>

	  <para>To polecenie jest skrótem dla -M GRUPA:nazwa.</para>
	</listitem>
      </varlistentry>

      <varlistentry>
	<term>-n</term>
	<listitem><para>Ta opcja wy¶wietla wszystkie informacje ACL
	    w formacie numerycznym. Domy¶lnie, SIDy s± konwertowane do
	    nazw, a typy ACE i maski do formatu czytelnego ³añcucha
	    znakowego.</para></listitem>
      </varlistentry>

      <varlistentry>
	<term>-h</term>
	<listitem><para>Wypisuje informacjê na temat u¿ycia programu
	    <command>smbcacls</command>.</para></listitem>
      </varlistentry>
    </variablelist>
</refsect1>

<refsect1>
    <title>FORMAT ACL</title>

    <para>Formatem ACL jest jeden lub wiêcej wpisów ACL oddzielonych
      albo przecinkami, albo znakami koñca linii. Wpis ACL jest jednym
      z nastêpuj±cych:</para>

    <para><programlisting>
REVISION:&lt;numer rewizji&gt;
OWNER:&lt;sid lub nazwa&gt;
GROUP:&lt;sid lub nazwa&gt;
ACL:&lt;sid lub nazwa&gt;:&lt;typ&gt;/&lt;flagi&gt;/&lt;maska&gt;
      </programlisting></para>

    <para>Rewizja (REVISION) ACL okre¶la wewnêtrzn± w Windows NT ACL
      rewizjê deskryptora zabezpieczenia. Je¶li nie jest okre¶lona,
      przyjmuje warto¶æ domy¶ln± 1. Korzystanie z warto¶ci innych ni¿
      1 mo¿e spowodowaæ dziwne zachowanie.</para>

    <para>W³a¶ciciel (OWNER) i grupa (GROUP) okre¶laj± sid'y w³a¶ciciela
      i grupy dla obiektu. Je¶li SID jest okre¶lony w formacie CWS-1-x-y-z,
      to taki jest u¿yty. W przeciwnym wypadku podana nazwa jest odwzorowana
      przy u¿yciu serwera na którym znajduje siê plik lub katalog.</para>

    <para>ACLe okre¶laj± zezwolenia przyznane dla SID'a. SID ten mo¿e byæ
      znów okre¶lony w formacie CWS-1-x-y-z lub jako nazwa, w którym to
      przypadku jest odwzorowana przez serwer na którym znajduje siê
      plik lub katalog. Typ, flagi i maska determinuj± typ dostêpu przyznany
      dla tego SID'a.</para>

    <para>Typ mo¿e byæ albo 0, albo 1, co odpowiada ALLOWED (zezwolony)
      lub DENIED (zabroniony) dostêp dla SID'a. Warto¶ci flag to geralnie
      zero dla plikowych ACLi i albo 9, albo 2 dla katalogowych ACLi.
      Niektóre powszechne flagi to:</para>

    <itemizedlist>
      <listitem><para>#define SEC_ACE_FLAG_OBJECT_INHERIT            0x1</para></listitem>
      <listitem><para>#define SEC_ACE_FLAG_CONTAINER_INHERIT         0x2</para></listitem>
      <listitem><para>#define SEC_ACE_FLAG_NO_PROPAGATE_INHERIT      0x4</para></listitem>
      <listitem><para>#define SEC_ACE_FLAG_INHERIT_ONLY              0x8</para></listitem>
    </itemizedlist>

    <para>Obecnie flagi mog± byæ okre¶lone tylko jako dziesiêtne lub
      szesnastkowe warto¶ci.</para>

    <para>Maska jest warto¶ci± która wyra¿a prawa dostêpu przyznane dla
      SID'a. Mo¿e byæ podana jako warto¶æ dzie¶iêtna lub szesnastkowa,
      lub za pomoc± jednego z poni¿szych ³añcuchów tekstowych które
      mapuj± na zezwolenia plikowe NT o tej samej nazwie.</para>

    <itemizedlist>
      <listitem><para><emphasis>R</emphasis> - Zezwól na dostêp do odczytu</para></listitem>
      <listitem><para><emphasis>W</emphasis> - Zezwól na dostêp do zapisu</para></listitem>
      <listitem><para><emphasis>X</emphasis> - Zezwolenie wykonania dla obiektu</para></listitem>
      <listitem><para><emphasis>D</emphasis> - Usuwanie obiektu</para></listitem>
      <listitem><para><emphasis>P</emphasis> - Zmiana zezwoleñ</para></listitem>
      <listitem><para><emphasis>O</emphasis> - Przejêcie w³asno¶ci</para></listitem>
    </itemizedlist>

    <para>Nastêpuj±ce ³±czone zezwolenia mog± byæ okre¶lane:</para>

    <itemizedlist>
      <listitem><para><emphasis>READ</emphasis> - Odpowiednik dla zezwoleñ 'RX'</para></listitem>
      <listitem><para><emphasis>CHANGE</emphasis> - Odpowiednik dla zezwoleñ 'RXWD'</para></listitem>
      <listitem><para><emphasis>FULL</emphasis> - Odpowiednik dla zezwoleñ 'RWXDPO'</para></listitem>
    </itemizedlist>

</refsect1>

<refsect1>
    <title>STATUS WYJ¦CIA</title>

    <para>Program <command>smbcacls</command> ustawia status wyj¶cia
      (exit status) zale¿nie od sukcesu lub jego braku w wykonywanych
      operacjach. Status wyj¶cia mo¿e byæ jedn± z poni¿szych warto¶ci.
    </para>

    <para>Je¶li operacja zakoñczy³a siê sukcesem, smbcacls zwraca
      status wyj¶cia 0. Je¶li smbcacls nie móg³ pod³±czyæ siê do
      okre¶lonego serwera lub nast±pi³ b³±d pobierania lub ustawiania
      ACLi, status wyj¶cia 1 jest zwracany. Je¶li nast±pi³ b³±d
      parsowania którego¶ z argumentów linii poleceñ, zwracany jest
      status wyj¶cia 2.</para>
</refsect1>

<refsect1>
    <title>AUTOR</title>

    <Para>Pierwotnie, Samba i zwi±zane z ni± oprogramowanie by³y
      stworzone przez Andrew Tridgella. Samba jest teraz rozwijana
      przez Zespó³ Samba jako projekt Open Source podobnie jak j±dro
      Linux.</para>

    <para><command>smbcacls</command> zosta³ napisany przez Andrew
      Tridgella i Tima Pottera.</para>

    <para>Konwersja do DocBook dla Samba 2.2 zosta³a wykonana przez
      Geralda Cartera. T³umaczenie na jêzyk polski wykona³
      Rafa³ Szcze¶niak.</para>
</refsect1>

</refentry>
