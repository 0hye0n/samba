<!DOCTYPE refentry PUBLIC "-//OASIS//DTD DocBook V4.1//EN">
<refentry id="smbpasswd" lang="pl">

<refmeta>
    <refentrytitle>smbpasswd</refentrytitle>
    <manvolnum>5</manvolnum>
</refmeta>

<refnamediv>
    <refname>smbpasswd</refname>
    <refpurpose>Plik zakodowanych hase³ Samba</refpurpose>
</refnamediv>

<refsynopsisdiv>
    <para><filename>smbpasswd</filename></para>
</refsynopsisdiv>

<refsect1>
    <title>OPIS</title>

    <para>Ten plik jest czê¶ci± pakietu <ulink url="samba.7.html">
	Samba</ulink>.

      <para>smbpasswd jest plikiem z zakodowanymi has³ami Samba.
	Zawiera nazwê u¿ytkownika, id u¿ytkownika Unix'owego i
	zakodowane has³a SMB u¿ytkownika jak równie¿ flagi
	informacyjne konta i czas ostatniej zmiany has³a. Format
	tego pliku ewoluowa³ razem z Samb± i mia³ kilka innych
	postaci w przesz³o¶ci.</para>
</refsect1>

<refsect1>
    <title>FORMAT PLIKU</title>

    <para>Format pliku smbpasswd u¿ywanego przez Samba 2.2 jest bardzo
      odobny do znanego Unix'owego pliku <filename>passwd(5)</filename>.
      Jest to plik ASCII zawieraj±cy jedn± liniê dla ka¿dego
      u¿ytkownika. Ka¿dy wpis rozpoczynaj±cy siê od # jest ignorowany.
      Plik smbpasswd zawiera nastêpuj±ce informacje o ka¿dym
      u¿ytkowniku.</para>

    <variablelist>
      <varlistentry>
	<term>nazwa</term>
	<listitem><para> Jest to nazwa u¿ytkownika. Musi to byæ nazwa
	    która ju¿ istnieje w standardowym UNIX'owym pliku passwd.
	  </para></listitem>
      </varlistentry>

      <varlistentry>
	<term>uid</term>
	<listitem><para>To jest UNIX'owy identyfikator u¿ytkownika (uid).
	    Musi pasowa¼ do pola uid takiego samego u¿ytkownika w
	    standardowym UNIX'owym pliku passwd. Je¶li nie bêdzie pasowa³,
	    wówczas Samba odmówi rozpoznania tego wpisu w pliku
	    <filename>smbpasswd</filename> jako poprawnego dla u¿ytkownika.
	  </para></listitem>
      </varlistentry>

      <varlistentry>
	<term>Hash Has³a Lanman</term>
	<listitem><para>To jest hash LANMAN has³a u¿ytkownika, zakodowany
	    jako 32 cyfry szesnastkowe. Hash LANMAN jest tworzony
	    poprzez kodowanie DES znanego ³añcucha przy pomocy has³a
	    u¿ytkownika jako klucza DES. To jest to samo has³o, których
	    u¿ywaj± maszyny Windows 95/98. Zwa¿, ¿e ten hash has³a jest
	    uwa¿any za s³aby i nieodporny na ataki "s³ownikowe" (dictionary
	    attacks), a je¶li dwóch u¿ytkowników wybierze to samo has³o,
	    ten wpis bêdzie identyczny (tzn. has³o nie jest "posolone"
	    ("salted") tak jak has³o UNIX). Je¶li u¿ytkownik ma puste has³o,
	    to pole bêdzie zawieraæ znaki "NO PASSWORD" jako pocz±tek
	    ³añcucha heksadecymalnego. Je¶li ³añcuch ten jest równy 32
	    znakom 'X' wówczas konto u¿ytkownika jest zaznaczone jako
	    <constant>wy³±czone</constant> i u¿ytkownik nie bêdzie móg³
	    zalogowaæ siê do serwera Samba.</para>

	  <para><emphasis>UWAGA !!</emphasis> Zauwa¿, ¿e poniewa¿ protokó³
	    autentykacyjny SMB/CIFS ma naturê wyzwania-odpowiedzi (challenge
	    -response), ka¿dy ze znajomo¶ci± hash'a tego has³a bêdzie w
	    stanie na¶ladowaæ u¿ytkownika w sieci. Z tego powodu, hashe te
	    s± znane jako <emphasis>"równowa¿nik czystego tekstu"</emphasis>
	    i <emphasis>NIE MOG¡</emphasis> byæ dostêpne dla nikogo, oprócz
	    u¿ytkownika root. Aby chroniæ te has³a, plik <filename>smbpasswd
	    </filename> jest umieszczony w katalogu z dostêpem do odczytu
	    i wej¶cia tylko dla u¿ytkownika root, a sam plik <filename>
	      smbpasswd</filename> musi byæ ustawiony do odczytu/zapisu tylko
	    przez root'a, bez ¿adnego innego dostêpu.</para></listitem>
      </varlistentry>

      <varlistentry>
	<term>Hash Hasla NT</term>
	<listitem><para>To jest hash Windows NT has³a u¿ytkownika,
	    zakodowany jako 32 cyfry szesnastkowe. Hash Windows NT jest
	    tworzony przez potraktowanie has³a u¿ytkownika jako
	    reprezentowanego w 16 bitowym UNIKODZIE little-endian i
	    potem przetworzenie go algorytmem MD4 (internet rfc1321).
	  </para>

	  <para>Ten hash has³a jest uwa¿any za bardziej bezpieczny ni¿
	    Hash Has³a Lanman, jako ¿e zachowuje on du¿e/ma³e litery
	    w ha¶le i u¿ywa algorytmu hashuj±cego du¿o wy¿szej jako¶ci.
	    Tym niemniej, nadal jest to przypadek w którym, gdy dwóch
	    u¿ytkowników bêdzie mia³o to samo has³o, ten wpis bêdzie
	    taki sam (tj. has³o nie jest "solone" ("salted") tak, jak
	    has³o UNIX).</para>
	  
	  <para><emphasis>UWAGA !!</emphasis> Zauwa¿, ¿e poniewa¿ protokó³
	  autentykacyjny SMB/CIFS ma naturê wyzwania-odpowiedzi
	  (challenge-response), ka¿dy ze znajomo¶ci± hash'a tego has³a
	  bêdzie w stanie na¶ladowaæ u¿ytkownika w sieci. Z tego powodu,
	  te hashe s± znane jako <emphasis>"równowa¿nik czystego tekstu"
	  </emphasis> i <emphasis>NIE MOG¡</emphasis> byæ dostêpne dla
	  nikogo, oprócz u¿ytkownika root. Aby chroniæ te has³a, plik
	  <filename>smbpasswd</filename> jest umieszczony w katalogu z
	  dostêpem do odczytu i wej¶cia tylko dla u¿ytkownika root, a
	  sam plik <filename>smbpasswd</filename> musi byæ ustawiony do
	  odczytu/zapisu tylko przez root'a, bez ¿adnego innego dostêpu.
	</para></listitem>
      </varlistentry>

      <varlistentry>
	<term>Flagi Konta</term>
	<listitem><para>Ta sekcja zawiera flagi, które opisuj± atrybuty
	    konta u¿ytkownika. W wydaniu Samba 2.2 to pole jest objête
	    znakami nawiasów '[' oraz ']' i ma zawsze d³ugo¶æ 13 znaków
	    (w³±cznie ze znakami '[' i ']'). Zawarto¶æ pola mog± stanowiæ
	    znaki.</para>

	  <itemizedlist>
	    <listitem><para><emphasis>U</emphasis> - Oznacza to,
	      ¿e to jest konto "U¿ytkownika", tzn. zwyk³ego u¿ytkownika.
	      Tylko konta U¿ytkownik i Zaufana stacja robocza (Workstation
	      Trust) s± obecnie wspierane w pliku <filename>smbpasswd
	      </filename>.</para></listitem>

	    <listitem><para><emphasis>N</emphasis> - To oznacza, ¿e konto
		nie ma ha³a (has³a w polach Hash Has³a Lanman i Hash Has³a
		NT s± ignorowane). Zauwa¿, ¿e to pozwoli u¿ytkownikom
		logowaæ siê bez has³a je¶li parametr <parameter>null
		  passwords</parameter> w pliku <ulink url="smb.conf.5.html">
		  <filename>smb.conf(5)</filename></ulink> jest ustawiony.
	      </para></listitem>

	    <listitem><para><emphasis>D</emphasis> - To oznacza, ¿e konto
		jest wy³±czone i ¿adne logowania SMB/CIFS nie bêd± dozwolone.
	      </para></listitem>

	    <listitem><para><emphasis>W</emphasis> - To oznacza, ¿e to konto
		jest kontem "Zaufanej stacji roboczej" ("Workstation Trust").
		Ten rodzaj konta jest u¿ywany w kodzie Samba PDC, ¿eby
		pozwoliæ stacjom Windows NT Workstation i Server na
		pod³±czenie siê do Domeny zarz±dzanej przez Samba PDC.
	      </para></listitem>
	  </itemizedlist>

	  <para>Inne flagi mog± byæ dodane, poniewa¿ kod bêdzie rozszerzany
	    w przysz³o¶ci. Reszta tego pola jest wype³niona spacjami.</para>
	</listitem>
      </varlistentry>

      <varlistentry>
	<term>Czas Ostatniej Zmiany</term>
	<listitem><para>To pole zawiera czas ostatniej modyfikacji konta. Sk³ada siê
	    ze znaków 'LCT-' (jako skrót dla "Last Change Time") po których
	    nastêpuje numerycznie zakodowany czas dokonania ostatniej zmiany,
	    jako czas UNIX w sekundach od pocz±tku "epoki" (1970).</para>
	</listitem>
      </varlistentry>
    </variablelist>

    <para>Wszystkie inne pola oddzielane dwukropkiem s± ignorowane w tej
      chwili.</para>

</refsect1>

<refsect1>
    <title>WERSJA</title>

    <para>Ta strona podrêcznika jest poprawna dla wersji 2.2 pakietu
      Samba.</para>
</refsect1>

<refsect1>
    <title>ZOBACZ TE¯</title>

    <para><ulink url="smbpasswd.8.html"><command>smbpasswd(8)</command></ulink>,
      <ulink url="samba.7.html">samba(7)</ulink>, i internetowe RFC1321
      po detale na temat algorytmu MD4.</para>
</refsect1>

<refsect1>
    <title>AUTOR</title>

    <para>Pierwotnie, Samba i zwi±zane z ni± oprogramowanie by³y
      stworzone przez Andrew Tridgella. Samba jest teraz rozwijana
      przez Zespó³ Samba jako projekt Open Source podobnie jak j±dro
      Linux.</para>

    <para>Pierwotnie, strony podrêcznika Samba zosta³y napisane przez
      Karla Auera. Kody ¼rod³owe tych stron zosta³y przekonwertowane do
      formatu YODL (kolejny ¶wietny kawa³ek oprogramowania Open Source
      dostêpny na <ulink url="ftp://ftp.icce.rug.nl/pub/unix/">
      ftp://ftp.icce.rug.nl/pub/unix/</ulink>) i zaktualizowane do wydania
      2.0 samby przez Jeremy Allisona. Konwersja do DocBook zosta³a
      wykonana przez Geralda Cartera. T³umaczenie na jêzyk polski
      i konwersjê polskiej wersji do DocBook wykona³ Rafa³ Szcze¶niak.
    </para>
</refsect1>

</refentry>
