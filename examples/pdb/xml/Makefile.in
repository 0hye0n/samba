PDB_OBJS	= pdb_xml.so 
PDB_CFLAGS	= `xml2-config --cflags`
PDB_LDFLAGS	= `xml2-config --libs`

include	$(MAKEFILE)

CC		= @CC@
LIBTOOL		= libtool
CFLAGS		= @CFLAGS@ $(PDB_CFLAGS)
CPPFLAGS	= @CPPFLAGS@ $(PDB_CPPFLAGS)
LDFLAGS		= @LDFLAGS@ $(PDB_LDFLAGS)
LDSHFLAGS	= -shared
srcdir		= @builddir@
FLAGS		=  $(CFLAGS) -Iinclude -I$(srcdir)/include -I$(srcdir)/ubiqx -I$(srcdir)/smbwrapper  -I. $(CPPFLAGS) -I$(srcdir)

# Default target

default: $(PDB_OBJS)

# Pattern rules

%.so: %.lo
	$(LIBTOOL) $(CC) $(LDSHFLAGS) $(LDFLAGS) -o $@ $< 

%.lo: %.c
	$(LIBTOOL) $(CC) $(FLAGS) -c $<

# Misc targets

clean:
	rm -rf .libs
	rm -f core *~ *% *.bak \
	$(PDB_OBJS) $(PDB_OBJS:.so=.o) $(PDB_OBJS:.so=.lo) 
