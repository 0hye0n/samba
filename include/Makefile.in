HEADERS = asn1.h asn1_err.h bits.h cache.h config_file.h des.h error.h	\
	gssapi.h hdb.h hdb_err.h keytab.h krb5.h krb5_err.h md4.h md5.h	\
	roken.h sha.h sl.h store.h

srcdir	= @srcdir@
VPATH	= $(srcdir)
top_srcdir = @top_srcdir@
CC	= @CC@
CFLAGS	= @CFLAGS@
DEFS	= -DHOST=\"@CANONICAL_HOST@\" 

LN_S = @LN_S@

all:
	for i in $(HEADERS); do \
	if test ! -h $$i -a ! -f $$i ; then X="$$X $$i"; fi \
	done; \
	if test -n "$$X" ; then $(MAKE) $$X; fi

.c.o:
	$(CC) $(CFLAGS) $(DEFS) -c $< 

clean:
	rm -f $(HEADERS) bits *.o core

krb5.h:
	$(LN_S) $(top_srcdir)/lib/krb5/krb5.h .

krb5_err.h:
	$(LN_S) ../lib/error/krb5_err.h .

asn1_err.h:
	$(LN_S) ../lib/error/asn1_err.h .

hdb_err.h:
	$(LN_S) ../lib/error/hdb_err.h .

error.h:
	$(LN_S) $(top_srcdir)/lib/error/error.h .

cache.h:
	$(LN_S) $(top_srcdir)/lib/krb5/cache.h .

keytab.h:
	$(LN_S) $(top_srcdir)/lib/krb5/keytab.h .

config_file.h:
	$(LN_S) $(top_srcdir)/lib/krb5/config_file.h .

asn1.h:
	$(LN_S) ../lib/asn1/asn1.h .

des.h:
	$(LN_S) $(top_srcdir)/lib/des/des.h .

hdb.h:
	$(LN_S) $(top_srcdir)/lib/hdb/hdb.h .

md4.h:
	$(LN_S) $(top_srcdir)/lib/des/md4.h .

md5.h:
	$(LN_S) $(top_srcdir)/lib/des/md5.h .

sha.h:
	$(LN_S) $(top_srcdir)/lib/des/sha.h .

store.h:
	$(LN_S) $(top_srcdir)/lib/krb5/store.h .

gssapi.h:
	$(LN_S) $(top_srcdir)/lib/gssapi/gssapi.h .

roken.h:
	$(LN_S) $(top_srcdir)/lib/roken/roken.h .

sl.h:
	$(LN_S) $(top_srcdir)/lib/sl/sl.h .

bits.h: bits
	./bits bits.h

bits: bits.o
	$(CC) -o bits bits.o

