#!/bin/sh
# $Id$
if test $# -lt 1; then
  echo "Usage: $0 host [arguments to telnet]"
  exit 1
fi
host=$1
shift
telnet_args=$*
bindir=%bindir%
pdc_trams=`dirname $0`
PATH=$pdc_trams:$bindir:$PATH
set -- `kx $host`
if test $# -ne 3; then
  exit 1
fi
pid=$1
disp=:$2
auth=$3
term=
oldifs=$IFS
IFS=:
set -- $PATH
IFS=$oldifs
for i in $*; do
  test -n "$i" || i="."
  for j in xterm aixterm dxterm hpterm; do
    if test -x $i/$j; then
      term=$j; break 2
    fi
  done
done
if test -n "$term"; then
  ($term -title $host -name $host -e env DISPLAY=$disp XAUTHORITY=$auth telnet -D $telnet_args $host; kill -USR2 $pid) &
else
  env DISPLAY=$disp XAUTHORITY=$auth telnet -D $telnet_args $host
  kill -USR2 $pid
fi
