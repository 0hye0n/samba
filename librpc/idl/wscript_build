#!/usr/bin/env python

# note that we use symlink=True for the common IDL files.
# this is because the gen_ndr output is committed in git,
# and we don't want the result of a waf build to be a large
# git diff of all of the changes in include paths in the gen_ndr directory
# by using a symlink, we end up putting the generated files (and the associated
# object files) in ../gen_ndr in the source tree, but still allow waf to be
# happy about all the build files appearing in the expected location in bin/default
bld.SAMBA_PIDL_LIST('PIDL',
                    '''atsvc.idl drsuapi.idl epmapper.idl initshutdown.idl
                       misc.idl ntlmssp.idl protected_storage.idl schannel.idl trkwks.idl
                       audiosrv.idl dfsblobs.idl dsbackup.idl eventlog.idl keysvc.idl
                       msgsvc.idl ntsvcs.idl remact.idl security.idl unixinfo.idl wzcsvc.idl
                       browser.idl dfs.idl dssetup.idl frsapi.idl krb5pac.idl
                       named_pipe_auth.idl orpc.idl rot.idl spoolss.idl w32time.idl xattr.idl
                       dbgidl.idl dnsserver.idl echo.idl frsrpc.idl lsa.idl nbt.idl
                       oxidresolver.idl samr.idl srvsvc.idl winreg.idl dcerpc.idl
                       drsblobs.idl efs.idl frstrans.idl mgmt.idl netlogon.idl
                       policyagent.idl scerpc.idl svcctl.idl wkssvc.idl rap.idl''',
                    options='--header --ndr-parser --samba3-ndr-server --samba3-ndr-client --server --client --python',
                    output_dir='../gen_ndr',
                    symlink=True)

bld.SAMBA_PIDL_LIST('PIDL',
                    'wmi.idl dcom.idl',
                    options='--header --ndr-parser --samba3-ndr-server --samba3-ndr-client --server --client --python --dcom-proxy --com-header',
                    output_dir='../gen_ndr',
                    symlink=True)

