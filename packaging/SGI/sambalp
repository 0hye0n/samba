#! /bin/sh
#
# Workaround Win95 printer driver/Impressario bug by removing
# the PS check for available virtual memory.  Note that this
# bug appears to be in all Win95 print drivers that generate
# PostScript; but is for certain there with a QMS-PS 810 (the
# printer type I configure on the Win95-side for printing with
# Samba).
#
# the perl script fixes 3 different bugs. 
# 1. remove the JCL statements added by some HP printer drivers to the
# beginning of the postscript output. 
# 2. Fix a bug in output from word files with long filenames. A non-printing
# character added to the end of the title comment by word is 
# removed. 
# 3. The VM fix described above.
#

/usr/samba/bin/psfixes.pl $2 | /usr/bin/lp -c -d$1 -t"$3 on $4"
rm $2
